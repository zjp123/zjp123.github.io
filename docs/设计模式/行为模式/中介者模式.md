# ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰

> ã€Šå‰ç«¯è®¾è®¡æ¨¡å¼å®æˆ˜æ‰‹å†Œã€‹ç³»åˆ— - ç¬¬äº”ç« 

---

## ä¸€å¥è¯å¤§ç™½è¯

**å°±åƒèˆªç©ºç®¡åˆ¶å¡”**ï¼šå¤šæ¶é£æœºè¦èµ·é£é™è½ï¼Œå¦‚æœé£æœºä¹‹é—´äº’ç›¸é€šä¿¡ï¼Œä¼šä¹±æˆä¸€å›¢ã€‚æœ‰äº†ç®¡åˆ¶å¡”ï¼Œæ‰€æœ‰é£æœºåªè·Ÿç®¡åˆ¶å¡”è¯´è¯ï¼Œç®¡åˆ¶å¡”ç»Ÿä¸€åè°ƒã€‚é£æœºä¹‹é—´ä¸éœ€è¦çŸ¥é“å½¼æ­¤çš„å­˜åœ¨ï¼Œåªéœ€è¦å¬ç®¡åˆ¶å¡”æŒ‡æŒ¥ã€‚

## å‰ç«¯ç—›ç‚¹

æƒ³è±¡ä¸€ä¸‹ï¼Œä½ åœ¨åšä¸€ä¸ªå¤æ‚çš„ç­›é€‰è¡¨å•ï¼Œå¤šä¸ªå­—æ®µä¹‹é—´äº’ç›¸å½±å“ï¼š

```typescript
// âŒ æ²¡æœ‰ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼çš„ä»£ç ï¼šç»„ä»¶ä¹‹é—´äº’ç›¸è°ƒç”¨ï¼Œä¸€å›¢ä¹±éº»
class ProvinceSelect {
  private citySelect: CitySelect;
  private districtSelect: DistrictSelect;
  private priceFilter: PriceFilter;
  
  onChange(value: string) {
    // çœä»½å˜åŒ–ï¼Œè¦é€šçŸ¥åŸå¸‚ä¸‹æ‹‰æ¡†
    this.citySelect.updateOptions(value);
    // è¿˜è¦é€šçŸ¥åŒºå¿ä¸‹æ‹‰æ¡†æ¸…ç©º
    this.districtSelect.clear();
    // è¿˜è¦é€šçŸ¥ä»·æ ¼ç­›é€‰å™¨æ›´æ–°èŒƒå›´
    this.priceFilter.updateRange(value);
  }
}

class CitySelect {
  private districtSelect: DistrictSelect;
  private priceFilter: PriceFilter;
  private houseTypeFilter: HouseTypeFilter;
  
  onChange(value: string) {
    // åŸå¸‚å˜åŒ–ï¼Œè¦é€šçŸ¥åŒºå¿ä¸‹æ‹‰æ¡†
    this.districtSelect.updateOptions(value);
    // è¿˜è¦é€šçŸ¥ä»·æ ¼ç­›é€‰å™¨
    this.priceFilter.updateRange(value);
    // è¿˜è¦é€šçŸ¥æˆ·å‹ç­›é€‰å™¨
    this.houseTypeFilter.updateOptions(value);
  }
}

// è¿˜æœ‰ DistrictSelectã€PriceFilterã€HouseTypeFilter...
// æ¯ä¸ªç»„ä»¶éƒ½è¦æŒæœ‰å…¶ä»–ç»„ä»¶çš„å¼•ç”¨ï¼Œäº’ç›¸è°ƒç”¨
```

**è¿™æ®µä»£ç çš„é—®é¢˜ï¼š**
1. ğŸ•¸ï¸ **ç½‘çŠ¶è€¦åˆ**ï¼šç»„ä»¶ä¹‹é—´äº’ç›¸ä¾èµ–ï¼Œå½¢æˆå¤æ‚çš„ç½‘çŠ¶ç»“æ„
2. ğŸ”„ **éš¾ä»¥ç»´æŠ¤**ï¼šä¿®æ”¹ä¸€ä¸ªç»„ä»¶ï¼Œå¯èƒ½å½±å“å¤šä¸ªå…¶ä»–ç»„ä»¶
3. ğŸ§© **å¤ç”¨å›°éš¾**ï¼šç»„ä»¶ä¾èµ–å¤ªå¤šï¼Œæ— æ³•å•ç‹¬å¤ç”¨
4. ğŸ› **å®¹æ˜“å‡ºé”™**ï¼šè°ƒç”¨é¡ºåºé”™äº†ï¼Œæ•´ä¸ªæµç¨‹å°±å´©äº†

## æ¨¡å¼æ ¸å¿ƒæ¦‚å¿µ

**ä¸­ä»‹è€…æ¨¡å¼çš„æœ¬è´¨**ï¼šç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œä½¿å¯¹è±¡ä¹‹é—´ä¸ç›´æ¥ç›¸äº’å¼•ç”¨ï¼Œé™ä½è€¦åˆåº¦ã€‚

**ä¸¤ä¸ªæ ¸å¿ƒè§’è‰²ï¼š**
- **ä¸­ä»‹è€…ï¼ˆMediatorï¼‰**ï¼šå®šä¹‰ä¸å„åŒäº‹å¯¹è±¡é€šä¿¡çš„æ¥å£ï¼Œåè°ƒå„å¯¹è±¡ä¹‹é—´çš„äº¤äº’
- **åŒäº‹ï¼ˆColleagueï¼‰**ï¼šæ¯ä¸ªåŒäº‹åªçŸ¥é“ä¸­ä»‹è€…ï¼Œé€šè¿‡ä¸­ä»‹è€…ä¸å…¶ä»–åŒäº‹é€šä¿¡

**ç±»æ¯”**ï¼š
- âœˆï¸ **èˆªç©ºç®¡åˆ¶å¡”**ï¼šé£æœºï¼ˆåŒäº‹ï¼‰â† ç®¡åˆ¶å¡”ï¼ˆä¸­ä»‹è€…ï¼‰â†’ é£æœºï¼ˆåŒäº‹ï¼‰
- ğŸ’¬ **èŠå¤©å®¤ç¾¤ä¸»**ï¼šæˆå‘˜ Aï¼ˆåŒäº‹ï¼‰â† ç¾¤ä¸»ï¼ˆä¸­ä»‹è€…ï¼‰â†’ æˆå‘˜ Bï¼ˆåŒäº‹ï¼‰
- ğŸ¢ **æˆ¿å±‹ä¸­ä»‹**ï¼šä¹°å®¶ï¼ˆåŒäº‹ï¼‰â† ä¸­ä»‹ï¼ˆä¸­ä»‹è€…ï¼‰â†’ å–å®¶ï¼ˆåŒäº‹ï¼‰

**äº¤äº’æ¨¡å¼å¯¹æ¯”ï¼š**

```
æ²¡æœ‰ä¸­ä»‹è€…ï¼šç½‘çŠ¶ç»“æ„ï¼ˆNÂ² å¤æ‚åº¦ï¼‰
A â†â†’ B
â†•  Ã—  â†•
C â†â†’ D
ï¼ˆ6æ¡è¿çº¿ï¼Œ4ä¸ªç»„ä»¶ä¸¤ä¸¤é€šä¿¡ï¼‰

æœ‰ä¸­ä»‹è€…ï¼šæ˜Ÿå½¢ç»“æ„ï¼ˆN å¤æ‚åº¦ï¼‰
    Mediator
   â†™ â†“ â†“ â†˜
  A  B  C  D
ï¼ˆ4æ¡è¿çº¿ï¼Œæ‰€æœ‰ç»„ä»¶åªè·Ÿä¸­ä»‹è€…é€šä¿¡ï¼‰
```

## å‰ç«¯å®æˆ˜æ¡ˆä¾‹

### åœºæ™¯ä¸€ï¼šå¤æ‚è¡¨å•å­—æ®µè”åŠ¨ï¼ˆæˆ¿äº§ç­›é€‰ï¼‰

æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªæˆ¿äº§ç­›é€‰è¡¨å•ï¼Œçœå¸‚åŒºã€ä»·æ ¼ã€æˆ·å‹ã€é¢ç§¯ç­‰å­—æ®µäº’ç›¸è”åŠ¨ï¼š

```typescript
// âœ… ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼é‡æ„

import React, { useState } from 'react';
import { Card, Select, InputNumber, Radio, Space, Tag, Button, message } from 'antd';
import { SearchOutlined, ReloadOutlined } from '@ant-design/icons';

const { Option } = Select;

// 1ï¸âƒ£ å®šä¹‰åŒäº‹æ¥å£
interface Colleague {
  setMediator(mediator: FormMediator): void;
  update(data: any): void;
}

// 2ï¸âƒ£ å®šä¹‰ä¸­ä»‹è€…æ¥å£
interface Mediator {
  notify(sender: Colleague, event: string, data?: any): void;
}

// 3ï¸âƒ£ å®ç°ä¸­ä»‹è€…ï¼šè¡¨å•åè°ƒå™¨
class FormMediator implements Mediator {
  private provinceSelect?: ProvinceSelectComponent;
  private citySelect?: CitySelectComponent;
  private districtSelect?: DistrictSelectComponent;
  private priceFilter?: PriceFilterComponent;
  private houseTypeFilter?: HouseTypeFilterComponent;
  private areaFilter?: AreaFilterComponent;
  
  // æ³¨å†Œå„ä¸ªç»„ä»¶
  registerProvince(component: ProvinceSelectComponent): void {
    this.provinceSelect = component;
  }
  
  registerCity(component: CitySelectComponent): void {
    this.citySelect = component;
  }
  
  registerDistrict(component: DistrictSelectComponent): void {
    this.districtSelect = component;
  }
  
  registerPrice(component: PriceFilterComponent): void {
    this.priceFilter = component;
  }
  
  registerHouseType(component: HouseTypeFilterComponent): void {
    this.houseTypeFilter = component;
  }
  
  registerArea(component: AreaFilterComponent): void {
    this.areaFilter = component;
  }
  
  // æ ¸å¿ƒæ–¹æ³•ï¼šå¤„ç†ç»„ä»¶ä¹‹é—´çš„é€šä¿¡
  notify(sender: Colleague, event: string, data?: any): void {
    console.log(`[ä¸­ä»‹è€…] æ”¶åˆ°é€šçŸ¥: ${event}`, data);
    
    if (event === 'provinceChange') {
      // çœä»½å˜åŒ–æ—¶ï¼Œæ›´æ–°åŸå¸‚ã€æ¸…ç©ºåŒºå¿ã€æ›´æ–°ä»·æ ¼èŒƒå›´
      this.citySelect?.update({ province: data });
      this.districtSelect?.update({ clear: true });
      this.priceFilter?.update({ province: data });
      this.houseTypeFilter?.update({ province: data });
    } 
    else if (event === 'cityChange') {
      // åŸå¸‚å˜åŒ–æ—¶ï¼Œæ›´æ–°åŒºå¿ã€æ›´æ–°ä»·æ ¼èŒƒå›´
      this.districtSelect?.update({ city: data });
      this.priceFilter?.update({ city: data });
      this.houseTypeFilter?.update({ city: data });
    } 
    else if (event === 'districtChange') {
      // åŒºå¿å˜åŒ–æ—¶ï¼Œæ›´æ–°ä»·æ ¼èŒƒå›´å’Œæˆ·å‹
      this.priceFilter?.update({ district: data });
      this.areaFilter?.update({ district: data });
    }
    else if (event === 'priceChange') {
      // ä»·æ ¼å˜åŒ–æ—¶ï¼Œæ›´æ–°æˆ·å‹é€‰é¡¹
      this.houseTypeFilter?.update({ priceRange: data });
    }
    else if (event === 'houseTypeChange') {
      // æˆ·å‹å˜åŒ–æ—¶ï¼Œæ›´æ–°é¢ç§¯èŒƒå›´
      this.areaFilter?.update({ houseType: data });
    }
  }
}

// 4ï¸âƒ£ å®ç°åŒäº‹ï¼šçœä»½é€‰æ‹©å™¨
class ProvinceSelectComponent implements Colleague {
  private mediator?: FormMediator;
  private updateCallback: (options: string[]) => void;
  
  constructor(updateCallback: (options: string[]) => void) {
    this.updateCallback = updateCallback;
  }
  
  setMediator(mediator: FormMediator): void {
    this.mediator = mediator;
    mediator.registerProvince(this);
  }
  
  update(data: any): void {
    // çœä»½é€‰é¡¹é€šå¸¸æ˜¯å›ºå®šçš„ï¼Œä¸éœ€è¦æ›´æ–°
  }
  
  onChange(value: string): void {
    console.log('[çœä»½é€‰æ‹©å™¨] å€¼å˜åŒ–:', value);
    // é€šçŸ¥ä¸­ä»‹è€…ï¼Œä¸ç›´æ¥è°ƒç”¨å…¶ä»–ç»„ä»¶
    this.mediator?.notify(this, 'provinceChange', value);
  }
}

// 5ï¸âƒ£ å®ç°åŒäº‹ï¼šåŸå¸‚é€‰æ‹©å™¨
class CitySelectComponent implements Colleague {
  private mediator?: FormMediator;
  private updateCallback: (options: string[]) => void;
  
  constructor(updateCallback: (options: string[]) => void) {
    this.updateCallback = updateCallback;
  }
  
  setMediator(mediator: FormMediator): void {
    this.mediator = mediator;
    mediator.registerCity(this);
  }
  
  update(data: any): void {
    if (data.province) {
      console.log('[åŸå¸‚é€‰æ‹©å™¨] æ›´æ–°é€‰é¡¹:', data.province);
      // æ ¹æ®çœä»½æ›´æ–°åŸå¸‚åˆ—è¡¨
      const cities = this.getCitiesByProvince(data.province);
      this.updateCallback(cities);
    }
  }
  
  onChange(value: string): void {
    console.log('[åŸå¸‚é€‰æ‹©å™¨] å€¼å˜åŒ–:', value);
    this.mediator?.notify(this, 'cityChange', value);
  }
  
  private getCitiesByProvince(province: string): string[] {
    const cityMap: Record<string, string[]> = {
      'å¹¿ä¸œ': ['å¹¿å·', 'æ·±åœ³', 'ç æµ·', 'ä¸œè'],
      'æµ™æ±Ÿ': ['æ­å·', 'å®æ³¢', 'æ¸©å·', 'å˜‰å…´'],
      'æ±Ÿè‹': ['å—äº¬', 'è‹å·', 'æ— é”¡', 'å¸¸å·'],
    };
    return cityMap[province] || [];
  }
}

// 6ï¸âƒ£ å®ç°åŒäº‹ï¼šåŒºå¿é€‰æ‹©å™¨
class DistrictSelectComponent implements Colleague {
  private mediator?: FormMediator;
  private updateCallback: (options: string[]) => void;
  private clearCallback: () => void;
  
  constructor(
    updateCallback: (options: string[]) => void,
    clearCallback: () => void
  ) {
    this.updateCallback = updateCallback;
    this.clearCallback = clearCallback;
  }
  
  setMediator(mediator: FormMediator): void {
    this.mediator = mediator;
    mediator.registerDistrict(this);
  }
  
  update(data: any): void {
    if (data.clear) {
      console.log('[åŒºå¿é€‰æ‹©å™¨] æ¸…ç©ºé€‰é¡¹');
      this.clearCallback();
    } else if (data.city) {
      console.log('[åŒºå¿é€‰æ‹©å™¨] æ›´æ–°é€‰é¡¹:', data.city);
      const districts = this.getDistrictsByCity(data.city);
      this.updateCallback(districts);
    }
  }
  
  onChange(value: string): void {
    console.log('[åŒºå¿é€‰æ‹©å™¨] å€¼å˜åŒ–:', value);
    this.mediator?.notify(this, 'districtChange', value);
  }
  
  private getDistrictsByCity(city: string): string[] {
    const districtMap: Record<string, string[]> = {
      'å¹¿å·': ['å¤©æ²³åŒº', 'è¶Šç§€åŒº', 'æµ·ç åŒº', 'ç•ªç¦ºåŒº'],
      'æ·±åœ³': ['ç¦ç”°åŒº', 'å—å±±åŒº', 'å®å®‰åŒº', 'é¾™å²—åŒº'],
      'æ­å·': ['è¥¿æ¹–åŒº', 'ä¸ŠåŸåŒº', 'ä½™æ­åŒº', 'æ»¨æ±ŸåŒº'],
    };
    return districtMap[city] || [];
  }
}

// 7ï¸âƒ£ å®ç°åŒäº‹ï¼šä»·æ ¼ç­›é€‰å™¨
class PriceFilterComponent implements Colleague {
  private mediator?: FormMediator;
  private updateCallback: (range: { min: number; max: number }) => void;
  
  constructor(updateCallback: (range: { min: number; max: number }) => void) {
    this.updateCallback = updateCallback;
  }
  
  setMediator(mediator: FormMediator): void {
    this.mediator = mediator;
    mediator.registerPrice(this);
  }
  
  update(data: any): void {
    if (data.province || data.city || data.district) {
      console.log('[ä»·æ ¼ç­›é€‰å™¨] æ›´æ–°ä»·æ ¼èŒƒå›´', data);
      // æ ¹æ®åœ°åŒºæ›´æ–°ä»·æ ¼èŒƒå›´ï¼ˆä¸€çº¿åŸå¸‚ä»·æ ¼é«˜ï¼‰
      const range = this.getPriceRangeByLocation(data);
      this.updateCallback(range);
    }
  }
  
  onChange(value: { min: number; max: number }): void {
    console.log('[ä»·æ ¼ç­›é€‰å™¨] å€¼å˜åŒ–:', value);
    this.mediator?.notify(this, 'priceChange', value);
  }
  
  private getPriceRangeByLocation(location: any): { min: number; max: number } {
    const city = location.city || '';
    if (['åŒ—äº¬', 'ä¸Šæµ·', 'æ·±åœ³', 'å¹¿å·'].includes(city)) {
      return { min: 100, max: 2000 }; // ä¸€çº¿åŸå¸‚ä»·æ ¼èŒƒå›´
    }
    return { min: 50, max: 500 }; // å…¶ä»–åŸå¸‚ä»·æ ¼èŒƒå›´
  }
}

// 8ï¸âƒ£ å®ç°åŒäº‹ï¼šæˆ·å‹ç­›é€‰å™¨
class HouseTypeFilterComponent implements Colleague {
  private mediator?: FormMediator;
  private updateCallback: (types: string[]) => void;
  
  constructor(updateCallback: (types: string[]) => void) {
    this.updateCallback = updateCallback;
  }
  
  setMediator(mediator: FormMediator): void {
    this.mediator = mediator;
    mediator.registerHouseType(this);
  }
  
  update(data: any): void {
    if (data.province || data.city || data.priceRange) {
      console.log('[æˆ·å‹ç­›é€‰å™¨] æ›´æ–°æˆ·å‹é€‰é¡¹', data);
      const types = ['ä¸€å±…', 'äºŒå±…', 'ä¸‰å±…', 'å››å±…', 'äº”å±…åŠä»¥ä¸Š'];
      this.updateCallback(types);
    }
  }
  
  onChange(value: string): void {
    console.log('[æˆ·å‹ç­›é€‰å™¨] å€¼å˜åŒ–:', value);
    this.mediator?.notify(this, 'houseTypeChange', value);
  }
}

// 9ï¸âƒ£ å®ç°åŒäº‹ï¼šé¢ç§¯ç­›é€‰å™¨
class AreaFilterComponent implements Colleague {
  private mediator?: FormMediator;
  private updateCallback: (range: { min: number; max: number }) => void;
  
  constructor(updateCallback: (range: { min: number; max: number }) => void) {
    this.updateCallback = updateCallback;
  }
  
  setMediator(mediator: FormMediator): void {
    this.mediator = mediator;
    mediator.registerArea(this);
  }
  
  update(data: any): void {
    if (data.district || data.houseType) {
      console.log('[é¢ç§¯ç­›é€‰å™¨] æ›´æ–°é¢ç§¯èŒƒå›´', data);
      const range = { min: 30, max: 200 };
      this.updateCallback(range);
    }
  }
}

// ğŸ”Ÿ React ç»„ä»¶ï¼šæˆ¿äº§ç­›é€‰è¡¨å•
const HouseFilterForm: React.FC = () => {
  const [province, setProvince] = useState<string>();
  const [city, setCity] = useState<string>();
  const [district, setDistrict] = useState<string>();
  const [priceMin, setPriceMin] = useState<number>(50);
  const [priceMax, setPriceMax] = useState<number>(500);
  const [houseType, setHouseType] = useState<string>();
  const [areaMin, setAreaMin] = useState<number>(30);
  const [areaMax, setAreaMax] = useState<number>(200);
  
  const [cityOptions, setCityOptions] = useState<string[]>([]);
  const [districtOptions, setDistrictOptions] = useState<string[]>([]);
  const [houseTypeOptions, setHouseTypeOptions] = useState<string[]>([
    'ä¸€å±…', 'äºŒå±…', 'ä¸‰å±…', 'å››å±…', 'äº”å±…åŠä»¥ä¸Š'
  ]);
  
  // åˆå§‹åŒ–ä¸­ä»‹è€…å’Œå„ä¸ªç»„ä»¶
  const [mediator] = useState(() => new FormMediator());
  const [provinceComponent] = useState(() => new ProvinceSelectComponent(setCityOptions));
  const [cityComponent] = useState(() => new CitySelectComponent(setCityOptions));
  const [districtComponent] = useState(() => new DistrictSelectComponent(
    setDistrictOptions,
    () => {
      setDistrict(undefined);
      setDistrictOptions([]);
    }
  ));
  const [priceComponent] = useState(() => new PriceFilterComponent((range) => {
    setPriceMin(range.min);
    setPriceMax(range.max);
  }));
  const [houseTypeComponent] = useState(() => new HouseTypeFilterComponent(setHouseTypeOptions));
  const [areaComponent] = useState(() => new AreaFilterComponent((range) => {
    setAreaMin(range.min);
    setAreaMax(range.max);
  }));
  
  // æ³¨å†Œç»„ä»¶åˆ°ä¸­ä»‹è€…
  React.useEffect(() => {
    provinceComponent.setMediator(mediator);
    cityComponent.setMediator(mediator);
    districtComponent.setMediator(mediator);
    priceComponent.setMediator(mediator);
    houseTypeComponent.setMediator(mediator);
    areaComponent.setMediator(mediator);
  }, []);
  
  const handleSearch = () => {
    const filters = {
      province,
      city,
      district,
      priceRange: [priceMin, priceMax],
      houseType,
      areaRange: [areaMin, areaMax],
    };
    console.log('æœç´¢æ¡ä»¶:', filters);
    message.success('å¼€å§‹æœç´¢æˆ¿æº...');
  };
  
  const handleReset = () => {
    setProvince(undefined);
    setCity(undefined);
    setDistrict(undefined);
    setCityOptions([]);
    setDistrictOptions([]);
    setHouseType(undefined);
    message.info('å·²é‡ç½®ç­›é€‰æ¡ä»¶');
  };
  
  return (
    <div style={{ padding: 24, backgroundColor: '#f0f2f5', minHeight: '100vh' }}>
      <Card title="ğŸ  æˆ¿äº§ç­›é€‰ï¼ˆä¸­ä»‹è€…æ¨¡å¼ï¼‰" style={{ maxWidth: 1000, margin: '0 auto' }}>
        <Space direction="vertical" size="large" style={{ width: '100%' }}>
          {/* åœ°åŒºé€‰æ‹© */}
          <Card type="inner" title="åœ°åŒº">
            <Space wrap>
              <div>
                <div style={{ marginBottom: 8, color: '#666' }}>çœä»½</div>
                <Select
                  value={province}
                  onChange={(val) => {
                    setProvince(val);
                    setCity(undefined);
                    provinceComponent.onChange(val);
                  }}
                  placeholder="è¯·é€‰æ‹©çœä»½"
                  style={{ width: 150 }}
                >
                  <Option value="å¹¿ä¸œ">å¹¿ä¸œ</Option>
                  <Option value="æµ™æ±Ÿ">æµ™æ±Ÿ</Option>
                  <Option value="æ±Ÿè‹">æ±Ÿè‹</Option>
                </Select>
              </div>
              
              <div>
                <div style={{ marginBottom: 8, color: '#666' }}>åŸå¸‚</div>
                <Select
                  value={city}
                  onChange={(val) => {
                    setCity(val);
                    setDistrict(undefined);
                    cityComponent.onChange(val);
                  }}
                  placeholder="è¯·å…ˆé€‰æ‹©çœä»½"
                  disabled={!province}
                  style={{ width: 150 }}
                >
                  {cityOptions.map(city => (
                    <Option key={city} value={city}>{city}</Option>
                  ))}
                </Select>
              </div>
              
              <div>
                <div style={{ marginBottom: 8, color: '#666' }}>åŒºå¿</div>
                <Select
                  value={district}
                  onChange={(val) => {
                    setDistrict(val);
                    districtComponent.onChange(val);
                  }}
                  placeholder="è¯·å…ˆé€‰æ‹©åŸå¸‚"
                  disabled={!city}
                  style={{ width: 150 }}
                >
                  {districtOptions.map(dist => (
                    <Option key={dist} value={dist}>{dist}</Option>
                  ))}
                </Select>
              </div>
            </Space>
          </Card>
          
          {/* ä»·æ ¼ç­›é€‰ */}
          <Card type="inner" title="ä»·æ ¼ï¼ˆä¸‡å…ƒï¼‰">
            <Space>
              <InputNumber
                value={priceMin}
                onChange={(val) => {
                  setPriceMin(val || 0);
                  priceComponent.onChange({ min: val || 0, max: priceMax });
                }}
                min={0}
                style={{ width: 120 }}
              />
              <span>-</span>
              <InputNumber
                value={priceMax}
                onChange={(val) => {
                  setPriceMax(val || 0);
                  priceComponent.onChange({ min: priceMin, max: val || 0 });
                }}
                min={priceMin}
                style={{ width: 120 }}
              />
              <Tag color="blue">æ ¹æ®åœ°åŒºè‡ªåŠ¨è°ƒæ•´èŒƒå›´</Tag>
            </Space>
          </Card>
          
          {/* æˆ·å‹ç­›é€‰ */}
          <Card type="inner" title="æˆ·å‹">
            <Radio.Group
              value={houseType}
              onChange={(e) => {
                setHouseType(e.target.value);
                houseTypeComponent.onChange(e.target.value);
              }}
            >
              {houseTypeOptions.map(type => (
                <Radio.Button key={type} value={type}>{type}</Radio.Button>
              ))}
            </Radio.Group>
          </Card>
          
          {/* é¢ç§¯ç­›é€‰ */}
          <Card type="inner" title="é¢ç§¯ï¼ˆã¡ï¼‰">
            <Space>
              <InputNumber
                value={areaMin}
                onChange={(val) => setAreaMin(val || 0)}
                min={0}
                style={{ width: 120 }}
              />
              <span>-</span>
              <InputNumber
                value={areaMax}
                onChange={(val) => setAreaMax(val || 0)}
                min={areaMin}
                style={{ width: 120 }}
              />
            </Space>
          </Card>
          
          {/* æ“ä½œæŒ‰é’® */}
          <Space>
            <Button
              type="primary"
              icon={<SearchOutlined />}
              onClick={handleSearch}
              size="large"
            >
              æœç´¢æˆ¿æº
            </Button>
            <Button
              icon={<ReloadOutlined />}
              onClick={handleReset}
              size="large"
            >
              é‡ç½®
            </Button>
          </Space>
        </Space>
        
        {/* è¯´æ˜ */}
        <Card type="inner" title="ğŸ“‹ ä¸­ä»‹è€…æ¨¡å¼è¯´æ˜" style={{ marginTop: 24 }}>
          <ul style={{ margin: 0, paddingLeft: 20 }}>
            <li>âœ… <strong>FormMediator</strong> æ˜¯ä¸­ä»‹è€…ï¼Œåè°ƒæ‰€æœ‰ç»„ä»¶ä¹‹é—´çš„äº¤äº’</li>
            <li>âœ… <strong>å„ä¸ªç­›é€‰ç»„ä»¶</strong> æ˜¯åŒäº‹ï¼Œåªä¸ä¸­ä»‹è€…é€šä¿¡ï¼Œä¸ç›´æ¥è°ƒç”¨å…¶ä»–ç»„ä»¶</li>
            <li>âœ… çœä»½å˜åŒ–æ—¶ï¼Œä¸­ä»‹è€…è‡ªåŠ¨é€šçŸ¥åŸå¸‚ã€åŒºå¿ã€ä»·æ ¼ç­‰ç»„ä»¶æ›´æ–°</li>
            <li>âœ… æ–°å¢ç­›é€‰æ¡ä»¶æ—¶ï¼Œåªéœ€æ³¨å†Œåˆ°ä¸­ä»‹è€…ï¼Œä¸å½±å“å…¶ä»–ç»„ä»¶</li>
            <li>âœ… é™ä½äº†ç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ï¼Œä»ç½‘çŠ¶ç»“æ„å˜æˆæ˜Ÿå½¢ç»“æ„</li>
          </ul>
        </Card>
      </Card>
    </div>
  );
};

export default HouseFilterForm;
```

#### ğŸ¯ ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼åçš„å¥½å¤„

1. **è§£è€¦**ï¼šç»„ä»¶ä¹‹é—´ä¸ç›´æ¥ä¾èµ–ï¼Œéƒ½é€šè¿‡ä¸­ä»‹è€…é€šä¿¡
2. **é›†ä¸­ç®¡ç†**ï¼šæ‰€æœ‰äº¤äº’é€»è¾‘éƒ½åœ¨ä¸­ä»‹è€…ä¸­ï¼Œæ˜“äºç»´æŠ¤
3. **æ˜“äºæ‰©å±•**ï¼šæ–°å¢ç»„ä»¶åªéœ€æ³¨å†Œåˆ°ä¸­ä»‹è€…ï¼Œä¸å½±å“å…¶ä»–ç»„ä»¶
4. **æ¸…æ™°çš„èŒè´£**ï¼šæ¯ä¸ªç»„ä»¶åªå…³æ³¨è‡ªå·±çš„é€»è¾‘ï¼Œä¸ç®¡åˆ«äºº

---

### åœºæ™¯äºŒï¼šèŠå¤©å®¤ï¼ˆå¤šäººé€šä¿¡ï¼‰

å®ç°ä¸€ä¸ªç®€å•çš„èŠå¤©å®¤ï¼Œç”¨æˆ·ä¹‹é—´ä¸ç›´æ¥å‘æ¶ˆæ¯ï¼Œè€Œæ˜¯é€šè¿‡èŠå¤©å®¤è½¬å‘ï¼š

```typescript
import React, { useState } from 'react';
import { Card, Input, Button, List, Avatar, Space, Tag, message as antdMessage } from 'antd';
import { SendOutlined, UserAddOutlined, UserDeleteOutlined } from '@ant-design/icons';

const { TextArea } = Input;

// æ¶ˆæ¯ç±»å‹
interface Message {
  id: string;
  sender: string;
  content: string;
  timestamp: number;
  type: 'text' | 'system';
}

// ç”¨æˆ·æ¥å£
interface User {
  id: string;
  name: string;
  avatar: string;
  color: string;
}

// åŒäº‹æ¥å£ï¼šèŠå¤©å®¤ç”¨æˆ·
abstract class ChatUser {
  protected id: string;
  protected name: string;
  protected chatRoom?: ChatRoom;
  
  constructor(id: string, name: string) {
    this.id = id;
    this.name = name;
  }
  
  // è®¾ç½®èŠå¤©å®¤ï¼ˆä¸­ä»‹è€…ï¼‰
  setChatRoom(chatRoom: ChatRoom): void {
    this.chatRoom = chatRoom;
  }
  
  // å‘é€æ¶ˆæ¯ï¼ˆé€šè¿‡ä¸­ä»‹è€…ï¼‰
  sendMessage(content: string): void {
    if (this.chatRoom) {
      this.chatRoom.sendMessage(this, content);
    }
  }
  
  // æ¥æ”¶æ¶ˆæ¯
  abstract receiveMessage(sender: string, content: string): void;
  
  getName(): string {
    return this.name;
  }
  
  getId(): string {
    return this.id;
  }
}

// å…·ä½“åŒäº‹ï¼šæ™®é€šç”¨æˆ·
class RegularUser extends ChatUser {
  private messageCallback: (sender: string, content: string) => void;
  
  constructor(id: string, name: string, callback: (sender: string, content: string) => void) {
    super(id, name);
    this.messageCallback = callback;
  }
  
  receiveMessage(sender: string, content: string): void {
    console.log(`[${this.name}] æ”¶åˆ°æ¶ˆæ¯ from ${sender}: ${content}`);
    this.messageCallback(sender, content);
  }
}

// ä¸­ä»‹è€…ï¼šèŠå¤©å®¤
class ChatRoom {
  private users: Map<string, ChatUser> = new Map();
  private messageHistory: Message[] = [];
  private onMessageCallback: (message: Message) => void;
  
  constructor(onMessageCallback: (message: Message) => void) {
    this.onMessageCallback = onMessageCallback;
  }
  
  // ç”¨æˆ·åŠ å…¥èŠå¤©å®¤
  join(user: ChatUser): void {
    this.users.set(user.getId(), user);
    user.setChatRoom(this);
    
    const systemMessage: Message = {
      id: Date.now().toString(),
      sender: 'system',
      content: `${user.getName()} åŠ å…¥äº†èŠå¤©å®¤`,
      timestamp: Date.now(),
      type: 'system',
    };
    
    this.messageHistory.push(systemMessage);
    this.onMessageCallback(systemMessage);
    
    console.log(`[èŠå¤©å®¤] ${user.getName()} åŠ å…¥ï¼Œå½“å‰äººæ•°: ${this.users.size}`);
  }
  
  // ç”¨æˆ·ç¦»å¼€èŠå¤©å®¤
  leave(userId: string): void {
    const user = this.users.get(userId);
    if (user) {
      this.users.delete(userId);
      
      const systemMessage: Message = {
        id: Date.now().toString(),
        sender: 'system',
        content: `${user.getName()} ç¦»å¼€äº†èŠå¤©å®¤`,
        timestamp: Date.now(),
        type: 'system',
      };
      
      this.messageHistory.push(systemMessage);
      this.onMessageCallback(systemMessage);
      
      console.log(`[èŠå¤©å®¤] ${user.getName()} ç¦»å¼€ï¼Œå½“å‰äººæ•°: ${this.users.size}`);
    }
  }
  
  // å‘é€æ¶ˆæ¯ï¼ˆç”±ä¸­ä»‹è€…è½¬å‘ç»™æ‰€æœ‰ç”¨æˆ·ï¼‰
  sendMessage(sender: ChatUser, content: string): void {
    const message: Message = {
      id: Date.now().toString(),
      sender: sender.getName(),
      content,
      timestamp: Date.now(),
      type: 'text',
    };
    
    this.messageHistory.push(message);
    this.onMessageCallback(message);
    
    // è½¬å‘ç»™é™¤äº†å‘é€è€…ä¹‹å¤–çš„æ‰€æœ‰ç”¨æˆ·
    this.users.forEach((user) => {
      if (user.getId() !== sender.getId()) {
        user.receiveMessage(sender.getName(), content);
      }
    });
    
    console.log(`[èŠå¤©å®¤] ${sender.getName()} å‘é€æ¶ˆæ¯: ${content}`);
  }
  
  // è·å–ç”¨æˆ·åˆ—è¡¨
  getUsers(): ChatUser[] {
    return Array.from(this.users.values());
  }
  
  // è·å–æ¶ˆæ¯å†å²
  getHistory(): Message[] {
    return this.messageHistory;
  }
}

// React ç»„ä»¶
const ChatRoomDemo: React.FC = () => {
  const [messages, setMessages] = useState<Message[]>([]);
  const [currentUser, setCurrentUser] = useState<User | null>(null);
  const [inputText, setInputText] = useState('');
  const [users, setUsers] = useState<User[]>([]);
  
  // åˆ›å»ºèŠå¤©å®¤ï¼ˆä¸­ä»‹è€…ï¼‰
  const [chatRoom] = useState(() => new ChatRoom((message) => {
    setMessages((prev) => [...prev, message]);
  }));
  
  // ç”¨æˆ·æ˜ å°„
  const [userMap] = useState(new Map<string, RegularUser>());
  
  // é¢„å®šä¹‰ç”¨æˆ·
  const predefinedUsers: User[] = [
    { id: '1', name: 'å¼ ä¸‰', avatar: 'ğŸ‘¨', color: '#1890ff' },
    { id: '2', name: 'æå››', avatar: 'ğŸ‘©', color: '#52c41a' },
    { id: '3', name: 'ç‹äº”', avatar: 'ğŸ‘¦', color: '#faad14' },
    { id: '4', name: 'èµµå…­', avatar: 'ğŸ‘§', color: '#f5222d' },
  ];
  
  // åŠ å…¥èŠå¤©å®¤
  const handleJoin = (user: User) => {
    if (currentUser) {
      antdMessage.warning('è¯·å…ˆé€€å‡ºå½“å‰ç”¨æˆ·');
      return;
    }
    
    const chatUser = new RegularUser(user.id, user.name, (sender, content) => {
      console.log(`[${user.name}] æ¥æ”¶åˆ°æ¶ˆæ¯`);
    });
    
    userMap.set(user.id, chatUser);
    chatRoom.join(chatUser);
    
    setCurrentUser(user);
    setUsers(chatRoom.getUsers().map(u => 
      predefinedUsers.find(pu => pu.id === u.getId())!
    ));
    
    antdMessage.success(`${user.name} å·²åŠ å…¥èŠå¤©å®¤`);
  };
  
  // ç¦»å¼€èŠå¤©å®¤
  const handleLeave = () => {
    if (!currentUser) return;
    
    chatRoom.leave(currentUser.id);
    userMap.delete(currentUser.id);
    
    setCurrentUser(null);
    setUsers(chatRoom.getUsers().map(u => 
      predefinedUsers.find(pu => pu.id === u.getId())!
    ));
    
    antdMessage.info(`${currentUser.name} å·²ç¦»å¼€èŠå¤©å®¤`);
  };
  
  // å‘é€æ¶ˆæ¯
  const handleSend = () => {
    if (!currentUser || !inputText.trim()) return;
    
    const chatUser = userMap.get(currentUser.id);
    if (chatUser) {
      chatUser.sendMessage(inputText);
      setInputText('');
    }
  };
  
  return (
    <div style={{ padding: 24, backgroundColor: '#f0f2f5', minHeight: '100vh' }}>
      <div style={{ maxWidth: 1200, margin: '0 auto', display: 'grid', gridTemplateColumns: '1fr 300px', gap: 16 }}>
        {/* èŠå¤©åŒºåŸŸ */}
        <Card
          title="ğŸ’¬ èŠå¤©å®¤ï¼ˆä¸­ä»‹è€…æ¨¡å¼ï¼‰"
          extra={
            currentUser ? (
              <Space>
                <Tag color={currentUser.color}>
                  {currentUser.avatar} {currentUser.name}
                </Tag>
                <Button
                  size="small"
                  danger
                  icon={<UserDeleteOutlined />}
                  onClick={handleLeave}
                >
                  ç¦»å¼€
                </Button>
              </Space>
            ) : null
          }
        >
          {/* æ¶ˆæ¯åˆ—è¡¨ */}
          <div style={{ height: 400, overflowY: 'auto', marginBottom: 16, padding: 16, backgroundColor: '#fafafa', borderRadius: 4 }}>
            {messages.map((msg) => (
              <div
                key={msg.id}
                style={{
                  marginBottom: 12,
                  textAlign: msg.type === 'system' ? 'center' : 
                    msg.sender === currentUser?.name ? 'right' : 'left',
                }}
              >
                {msg.type === 'system' ? (
                  <Tag color="default">{msg.content}</Tag>
                ) : (
                  <div>
                    <div style={{ fontSize: 12, color: '#999', marginBottom: 4 }}>
                      {msg.sender} {new Date(msg.timestamp).toLocaleTimeString()}
                    </div>
                    <div
                      style={{
                        display: 'inline-block',
                        padding: '8px 12px',
                        borderRadius: 8,
                        backgroundColor: msg.sender === currentUser?.name ? '#1890ff' : '#fff',
                        color: msg.sender === currentUser?.name ? '#fff' : '#333',
                        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',
                      }}
                    >
                      {msg.content}
                    </div>
                  </div>
                )}
              </div>
            ))}
          </div>
          
          {/* è¾“å…¥æ¡† */}
          <Space.Compact style={{ width: '100%' }}>
            <TextArea
              value={inputText}
              onChange={(e) => setInputText(e.target.value)}
              onPressEnter={(e) => {
                if (!e.shiftKey) {
                  e.preventDefault();
                  handleSend();
                }
              }}
              placeholder={currentUser ? 'è¾“å…¥æ¶ˆæ¯ï¼ŒæŒ‰ Enter å‘é€' : 'è¯·å…ˆé€‰æ‹©ç”¨æˆ·åŠ å…¥èŠå¤©å®¤'}
              disabled={!currentUser}
              rows={1}
              style={{ resize: 'none' }}
            />
            <Button
              type="primary"
              icon={<SendOutlined />}
              onClick={handleSend}
              disabled={!currentUser || !inputText.trim()}
            >
              å‘é€
            </Button>
          </Space.Compact>
        </Card>
        
        {/* ç”¨æˆ·åˆ—è¡¨ */}
        <div>
          <Card title="åœ¨çº¿ç”¨æˆ·" size="small" style={{ marginBottom: 16 }}>
            <List
              dataSource={users}
              renderItem={(user) => (
                <List.Item>
                  <Space>
                    <Avatar style={{ backgroundColor: user.color }}>
                      {user.avatar}
                    </Avatar>
                    <span>{user.name}</span>
                  </Space>
                </List.Item>
              )}
              locale={{ emptyText: 'æš‚æ— åœ¨çº¿ç”¨æˆ·' }}
            />
          </Card>
          
          <Card title="é€‰æ‹©ç”¨æˆ·åŠ å…¥" size="small">
            <Space direction="vertical" style={{ width: '100%' }}>
              {predefinedUsers.map((user) => (
                <Button
                  key={user.id}
                  block
                  icon={<UserAddOutlined />}
                  onClick={() => handleJoin(user)}
                  disabled={!!currentUser || users.some(u => u.id === user.id)}
                  style={{ borderColor: user.color, color: user.color }}
                >
                  {user.avatar} {user.name}
                </Button>
              ))}
            </Space>
          </Card>
        </div>
      </div>
      
      {/* è¯´æ˜ */}
      <Card title="ğŸ“‹ ä¸­ä»‹è€…æ¨¡å¼è¯´æ˜" style={{ maxWidth: 1200, margin: '16px auto 0' }}>
        <ul style={{ margin: 0, paddingLeft: 20 }}>
          <li>âœ… <strong>ChatRoom</strong> æ˜¯ä¸­ä»‹è€…ï¼Œç®¡ç†æ‰€æœ‰ç”¨æˆ·å’Œæ¶ˆæ¯è½¬å‘</li>
          <li>âœ… <strong>ChatUser</strong> æ˜¯åŒäº‹ï¼Œç”¨æˆ·ä¹‹é—´ä¸ç›´æ¥é€šä¿¡ï¼Œéƒ½é€šè¿‡èŠå¤©å®¤</li>
          <li>âœ… ç”¨æˆ·å‘é€æ¶ˆæ¯æ—¶ï¼Œç”±èŠå¤©å®¤è½¬å‘ç»™å…¶ä»–æ‰€æœ‰ç”¨æˆ·</li>
          <li>âœ… ç”¨æˆ·åŠ å…¥/ç¦»å¼€æ—¶ï¼ŒèŠå¤©å®¤ç»Ÿä¸€ç®¡ç†å’Œé€šçŸ¥</li>
          <li>âœ… é™ä½äº†ç”¨æˆ·ä¹‹é—´çš„è€¦åˆï¼Œæ–°å¢ç”¨æˆ·ä¸å½±å“å…¶ä»–ç”¨æˆ·</li>
        </ul>
      </Card>
    </div>
  );
};

export default ChatRoomDemo;
```

---

### åœºæ™¯ä¸‰ï¼šç»„ä»¶é—´é€šä¿¡ï¼ˆæ™ºèƒ½å®¶å±…ä¸­æ§ï¼‰

å®ç°ä¸€ä¸ªæ™ºèƒ½å®¶å±…æ§åˆ¶é¢æ¿ï¼Œå„ä¸ªè®¾å¤‡é€šè¿‡ä¸­æ§ç³»ç»Ÿè”åŠ¨ï¼š

```typescript
import React, { useState } from 'react';
import { Card, Switch, Slider, Button, Space, Tag, Row, Col, message } from 'antd';
import {
  BulbOutlined,
  FireOutlined,
  ThunderboltOutlined,
  HomeOutlined,
} from '@ant-design/icons';

// è®¾å¤‡æ¥å£
abstract class SmartDevice {
  protected id: string;
  protected name: string;
  protected homeHub?: HomeHub;
  
  constructor(id: string, name: string) {
    this.id = id;
    this.name = name;
  }
  
  setHomeHub(hub: HomeHub): void {
    this.homeHub = hub;
  }
  
  getId(): string {
    return this.id;
  }
  
  getName(): string {
    return this.name;
  }
  
  // é€šçŸ¥ä¸­æ§è®¾å¤‡çŠ¶æ€å˜åŒ–
  notifyStatusChange(status: any): void {
    this.homeHub?.onDeviceStatusChange(this, status);
  }
  
  // æ¥æ”¶ä¸­æ§æŒ‡ä»¤
  abstract receiveCommand(command: string, data?: any): void;
}

// å…·ä½“è®¾å¤‡ï¼šæ™ºèƒ½ç¯
class SmartLight extends SmartDevice {
  private status: { on: boolean; brightness: number } = { on: false, brightness: 50 };
  private updateCallback: (status: { on: boolean; brightness: number }) => void;
  
  constructor(id: string, name: string, callback: (status: any) => void) {
    super(id, name);
    this.updateCallback = callback;
  }
  
  turnOn(): void {
    this.status.on = true;
    this.updateCallback(this.status);
    this.notifyStatusChange(this.status);
    console.log(`[${this.name}] å·²å¼€å¯`);
  }
  
  turnOff(): void {
    this.status.on = false;
    this.updateCallback(this.status);
    this.notifyStatusChange(this.status);
    console.log(`[${this.name}] å·²å…³é—­`);
  }
  
  setBrightness(value: number): void {
    this.status.brightness = value;
    this.updateCallback(this.status);
    this.notifyStatusChange(this.status);
    console.log(`[${this.name}] äº®åº¦è®¾ç½®ä¸º ${value}`);
  }
  
  receiveCommand(command: string, data?: any): void {
    console.log(`[${this.name}] æ”¶åˆ°æŒ‡ä»¤: ${command}`, data);
    switch (command) {
      case 'turnOn':
        this.turnOn();
        break;
      case 'turnOff':
        this.turnOff();
        break;
      case 'setBrightness':
        this.setBrightness(data);
        break;
    }
  }
  
  getStatus() {
    return this.status;
  }
}

// å…·ä½“è®¾å¤‡ï¼šç©ºè°ƒ
class AirConditioner extends SmartDevice {
  private status: { on: boolean; temperature: number; mode: string } = {
    on: false,
    temperature: 26,
    mode: 'cool',
  };
  private updateCallback: (status: any) => void;
  
  constructor(id: string, name: string, callback: (status: any) => void) {
    super(id, name);
    this.updateCallback = callback;
  }
  
  turnOn(): void {
    this.status.on = true;
    this.updateCallback(this.status);
    this.notifyStatusChange(this.status);
    console.log(`[${this.name}] å·²å¼€å¯`);
  }
  
  turnOff(): void {
    this.status.on = false;
    this.updateCallback(this.status);
    this.notifyStatusChange(this.status);
    console.log(`[${this.name}] å·²å…³é—­`);
  }
  
  setTemperature(value: number): void {
    this.status.temperature = value;
    this.updateCallback(this.status);
    this.notifyStatusChange(this.status);
    console.log(`[${this.name}] æ¸©åº¦è®¾ç½®ä¸º ${value}Â°C`);
  }
  
  receiveCommand(command: string, data?: any): void {
    console.log(`[${this.name}] æ”¶åˆ°æŒ‡ä»¤: ${command}`, data);
    switch (command) {
      case 'turnOn':
        this.turnOn();
        break;
      case 'turnOff':
        this.turnOff();
        break;
      case 'setTemperature':
        this.setTemperature(data);
        break;
    }
  }
  
  getStatus() {
    return this.status;
  }
}

// å…·ä½“è®¾å¤‡ï¼šçª—å¸˜
class SmartCurtain extends SmartDevice {
  private status: { open: boolean } = { open: false };
  private updateCallback: (status: any) => void;
  
  constructor(id: string, name: string, callback: (status: any) => void) {
    super(id, name);
    this.updateCallback = callback;
  }
  
  open(): void {
    this.status.open = true;
    this.updateCallback(this.status);
    this.notifyStatusChange(this.status);
    console.log(`[${this.name}] å·²æ‰“å¼€`);
  }
  
  close(): void {
    this.status.open = false;
    this.updateCallback(this.status);
    this.notifyStatusChange(this.status);
    console.log(`[${this.name}] å·²å…³é—­`);
  }
  
  receiveCommand(command: string, data?: any): void {
    console.log(`[${this.name}] æ”¶åˆ°æŒ‡ä»¤: ${command}`);
    switch (command) {
      case 'open':
        this.open();
        break;
      case 'close':
        this.close();
        break;
    }
  }
  
  getStatus() {
    return this.status;
  }
}

// ä¸­ä»‹è€…ï¼šæ™ºèƒ½å®¶å±…ä¸­æ§
class HomeHub {
  private devices: Map<string, SmartDevice> = new Map();
  
  // æ³¨å†Œè®¾å¤‡
  register(device: SmartDevice): void {
    this.devices.set(device.getId(), device);
    device.setHomeHub(this);
    console.log(`[ä¸­æ§] è®¾å¤‡å·²æ³¨å†Œ: ${device.getName()}`);
  }
  
  // è®¾å¤‡çŠ¶æ€å˜åŒ–æ—¶çš„è”åŠ¨é€»è¾‘
  onDeviceStatusChange(device: SmartDevice, status: any): void {
    console.log(`[ä¸­æ§] æ£€æµ‹åˆ°è®¾å¤‡çŠ¶æ€å˜åŒ–: ${device.getName()}`, status);
    
    // åœºæ™¯è”åŠ¨è§„åˆ™
    if (device instanceof SmartLight) {
      // ç¯å¼€å¯æ—¶ï¼Œå¦‚æœäº®åº¦è¶…è¿‡80ï¼Œå…³é—­çª—å¸˜ï¼ˆæ¨¡æ‹Ÿå¼ºå…‰åœºæ™¯ï¼‰
      if (status.on && status.brightness > 80) {
        this.sendCommand('curtain', 'close');
        message.info('æ£€æµ‹åˆ°å¼ºå…‰ï¼Œè‡ªåŠ¨å…³é—­çª—å¸˜');
      }
    } else if (device instanceof AirConditioner) {
      // ç©ºè°ƒå¼€å¯ä¸”æ¸©åº¦ä½äº24åº¦ï¼Œè°ƒæš—ç¯å…‰ï¼ˆæ¨¡æ‹Ÿç¡çœ æ¨¡å¼ï¼‰
      if (status.on && status.temperature < 24) {
        this.sendCommand('light', 'setBrightness', 30);
        message.info('è¿›å…¥ç¡çœ æ¨¡å¼ï¼Œè‡ªåŠ¨è°ƒæš—ç¯å…‰');
      }
    } else if (device instanceof SmartCurtain) {
      // çª—å¸˜æ‰“å¼€æ—¶ï¼Œè°ƒé«˜ç©ºè°ƒæ¸©åº¦ï¼ˆæ¨¡æ‹Ÿé˜³å…‰å……è¶³ï¼‰
      if (status.open) {
        const ac = this.devices.get('ac') as AirConditioner;
        if (ac && ac.getStatus().on) {
          this.sendCommand('ac', 'setTemperature', 28);
          message.info('çª—å¸˜æ‰“å¼€ï¼Œè‡ªåŠ¨è°ƒé«˜ç©ºè°ƒæ¸©åº¦');
        }
      }
    }
  }
  
  // å‘é€æŒ‡ä»¤ç»™æŒ‡å®šè®¾å¤‡
  sendCommand(deviceId: string, command: string, data?: any): void {
    const device = this.devices.get(deviceId);
    if (device) {
      device.receiveCommand(command, data);
    }
  }
  
  // åœºæ™¯æ¨¡å¼ï¼šç¦»å®¶æ¨¡å¼
  leavingHomeMode(): void {
    console.log('[ä¸­æ§] å¯åŠ¨ç¦»å®¶æ¨¡å¼');
    this.sendCommand('light', 'turnOff');
    this.sendCommand('ac', 'turnOff');
    this.sendCommand('curtain', 'close');
    message.success('ç¦»å®¶æ¨¡å¼å·²å¯åŠ¨ï¼šæ‰€æœ‰è®¾å¤‡å·²å…³é—­');
  }
  
  // åœºæ™¯æ¨¡å¼ï¼šå›å®¶æ¨¡å¼
  arrivingHomeMode(): void {
    console.log('[ä¸­æ§] å¯åŠ¨å›å®¶æ¨¡å¼');
    this.sendCommand('light', 'turnOn');
    this.sendCommand('light', 'setBrightness', 70);
    this.sendCommand('ac', 'turnOn');
    this.sendCommand('curtain', 'open');
    message.success('å›å®¶æ¨¡å¼å·²å¯åŠ¨ï¼šæ¬¢è¿å›å®¶');
  }
}

// React ç»„ä»¶
const SmartHomePanel: React.FC = () => {
  const [lightStatus, setLightStatus] = useState({ on: false, brightness: 50 });
  const [acStatus, setAcStatus] = useState({ on: false, temperature: 26, mode: 'cool' });
  const [curtainStatus, setCurtainStatus] = useState({ open: false });
  
  // åˆ›å»ºè®¾å¤‡å’Œä¸­æ§
  const [homeHub] = useState(() => {
    const hub = new HomeHub();
    
    const light = new SmartLight('light', 'å®¢å…ç¯', setLightStatus);
    const ac = new AirConditioner('ac', 'å®¢å…ç©ºè°ƒ', setAcStatus);
    const curtain = new SmartCurtain('curtain', 'å®¢å…çª—å¸˜', setCurtainStatus);
    
    hub.register(light);
    hub.register(ac);
    hub.register(curtain);
    
    return hub;
  });
  
  return (
    <div style={{ padding: 24, backgroundColor: '#f0f2f5', minHeight: '100vh' }}>
      <Card title="ğŸ  æ™ºèƒ½å®¶å±…ä¸­æ§ï¼ˆä¸­ä»‹è€…æ¨¡å¼ï¼‰" style={{ maxWidth: 1000, margin: '0 auto' }}>
        {/* åœºæ™¯æ¨¡å¼ */}
        <Card type="inner" title="ä¸€é”®åœºæ™¯" style={{ marginBottom: 16 }}>
          <Space>
            <Button
              type="primary"
              icon={<HomeOutlined />}
              onClick={() => homeHub.arrivingHomeMode()}
            >
              å›å®¶æ¨¡å¼
            </Button>
            <Button
              icon={<HomeOutlined />}
              onClick={() => homeHub.leavingHomeMode()}
            >
              ç¦»å®¶æ¨¡å¼
            </Button>
            <Tag color="blue">ğŸ’¡ è‡ªåŠ¨è”åŠ¨ï¼šç¯å…‰-çª—å¸˜-ç©ºè°ƒ</Tag>
          </Space>
        </Card>
        
        <Row gutter={16}>
          {/* æ™ºèƒ½ç¯æ§åˆ¶ */}
          <Col span={8}>
            <Card
              title={
                <Space>
                  <BulbOutlined style={{ color: lightStatus.on ? '#faad14' : '#999' }} />
                  å®¢å…ç¯
                </Space>
              }
              extra={
                <Switch
                  checked={lightStatus.on}
                  onChange={(checked) => {
                    homeHub.sendCommand('light', checked ? 'turnOn' : 'turnOff');
                  }}
                />
              }
            >
              <div>
                <div style={{ marginBottom: 8 }}>äº®åº¦: {lightStatus.brightness}%</div>
                <Slider
                  value={lightStatus.brightness}
                  onChange={(value) => {
                    homeHub.sendCommand('light', 'setBrightness', value);
                  }}
                  disabled={!lightStatus.on}
                />
              </div>
              <Tag color={lightStatus.on ? 'success' : 'default'}>
                {lightStatus.on ? 'å·²å¼€å¯' : 'å·²å…³é—­'}
              </Tag>
            </Card>
          </Col>
          
          {/* ç©ºè°ƒæ§åˆ¶ */}
          <Col span={8}>
            <Card
              title={
                <Space>
                  <FireOutlined style={{ color: acStatus.on ? '#1890ff' : '#999' }} />
                  å®¢å…ç©ºè°ƒ
                </Space>
              }
              extra={
                <Switch
                  checked={acStatus.on}
                  onChange={(checked) => {
                    homeHub.sendCommand('ac', checked ? 'turnOn' : 'turnOff');
                  }}
                />
              }
            >
              <div>
                <div style={{ marginBottom: 8 }}>æ¸©åº¦: {acStatus.temperature}Â°C</div>
                <Slider
                  min={16}
                  max={32}
                  value={acStatus.temperature}
                  onChange={(value) => {
                    homeHub.sendCommand('ac', 'setTemperature', value);
                  }}
                  disabled={!acStatus.on}
                />
              </div>
              <Tag color={acStatus.on ? 'processing' : 'default'}>
                {acStatus.on ? 'åˆ¶å†·ä¸­' : 'å·²å…³é—­'}
              </Tag>
            </Card>
          </Col>
          
          {/* çª—å¸˜æ§åˆ¶ */}
          <Col span={8}>
            <Card
              title={
                <Space>
                  <ThunderboltOutlined style={{ color: curtainStatus.open ? '#52c41a' : '#999' }} />
                  å®¢å…çª—å¸˜
                </Space>
              }
            >
              <div style={{ marginBottom: 16, textAlign: 'center' }}>
                <div style={{
                  width: '100%',
                  height: 100,
                  backgroundColor: curtainStatus.open ? '#fff' : '#666',
                  borderRadius: 4,
                  transition: 'all 0.3s',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                  color: curtainStatus.open ? '#999' : '#fff',
                }}>
                  {curtainStatus.open ? 'â˜€ï¸ çª—å¤–æ˜äº®' : 'ğŸŒ™ çª—å¸˜å…³é—­'}
                </div>
              </div>
              <Space>
                <Button
                  type={curtainStatus.open ? 'primary' : 'default'}
                  onClick={() => homeHub.sendCommand('curtain', 'open')}
                >
                  æ‰“å¼€
                </Button>
                <Button
                  type={!curtainStatus.open ? 'primary' : 'default'}
                  onClick={() => homeHub.sendCommand('curtain', 'close')}
                >
                  å…³é—­
                </Button>
              </Space>
            </Card>
          </Col>
        </Row>
        
        {/* è¯´æ˜ */}
        <Card type="inner" title="ğŸ“‹ ä¸­ä»‹è€…æ¨¡å¼è¯´æ˜" style={{ marginTop: 16 }}>
          <ul style={{ margin: 0, paddingLeft: 20 }}>
            <li>âœ… <strong>HomeHub</strong> æ˜¯ä¸­ä»‹è€…ï¼Œåè°ƒæ‰€æœ‰æ™ºèƒ½è®¾å¤‡</li>
            <li>âœ… <strong>SmartDevice</strong> æ˜¯åŒäº‹ï¼Œè®¾å¤‡ä¹‹é—´ä¸ç›´æ¥é€šä¿¡</li>
            <li>âœ… è®¾å¤‡çŠ¶æ€å˜åŒ–æ—¶ï¼Œé€šè¿‡ä¸­æ§è§¦å‘è”åŠ¨è§„åˆ™ï¼š</li>
            <ul style={{ paddingLeft: 20 }}>
              <li>ğŸ”† ç¯å…‰äº®åº¦ &gt; 80% â†’ è‡ªåŠ¨å…³é—­çª—å¸˜</li>
              <li>â„ï¸ ç©ºè°ƒæ¸©åº¦ &lt; 24Â°C â†’ è‡ªåŠ¨è°ƒæš—ç¯å…‰ï¼ˆç¡çœ æ¨¡å¼ï¼‰</li>
              <li>â˜€ï¸ çª—å¸˜æ‰“å¼€ â†’ ç©ºè°ƒæ¸©åº¦è°ƒé«˜ï¼ˆé˜³å…‰å……è¶³ï¼‰</li>
            </ul>
            <li>âœ… ä¸€é”®åœºæ™¯æ¨¡å¼ï¼šå›å®¶/ç¦»å®¶æ¨¡å¼ç»Ÿä¸€æ§åˆ¶æ‰€æœ‰è®¾å¤‡</li>
          </ul>
        </Card>
      </Card>
    </div>
  );
};

export default SmartHomePanel;
```

## æ¨¡å¼æ€»ç»“

### âœ… ä¼˜ç‚¹

1. **é™ä½è€¦åˆåº¦**ï¼šç»„ä»¶ä¹‹é—´ä»ç½‘çŠ¶ä¾èµ–å˜æˆæ˜Ÿå½¢ä¾èµ–ï¼Œå¤æ‚åº¦ä» O(nÂ²) é™åˆ° O(n)
2. **é›†ä¸­æ§åˆ¶**ï¼šæ‰€æœ‰äº¤äº’é€»è¾‘é›†ä¸­åœ¨ä¸­ä»‹è€…ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤
3. **æ˜“äºæ‰©å±•**ï¼šæ–°å¢ç»„ä»¶åªéœ€æ³¨å†Œåˆ°ä¸­ä»‹è€…ï¼Œä¸å½±å“å…¶ä»–ç»„ä»¶
4. **ç¬¦åˆå•ä¸€èŒè´£**ï¼šæ¯ä¸ªç»„ä»¶åªè´Ÿè´£è‡ªå·±çš„åŠŸèƒ½ï¼Œä¸ç®¡å…¶ä»–ç»„ä»¶
5. **ä¾¿äºå¤ç”¨**ï¼šç»„ä»¶ä¸ä¾èµ–å…¶ä»–ç»„ä»¶ï¼Œå¯ä»¥å•ç‹¬å¤ç”¨

### âŒ ç¼ºç‚¹

1. **ä¸­ä»‹è€…å¯èƒ½å˜å¾—å¤æ‚**ï¼šæ‰€æœ‰äº¤äº’é€»è¾‘éƒ½åœ¨ä¸­ä»‹è€…ä¸­ï¼Œå¯èƒ½å½¢æˆ"ä¸Šå¸ç±»"
2. **è¿‡åº¦é›†ä¸­**ï¼šä¸­ä»‹è€…æ‰¿æ‹…äº†å¤ªå¤šèŒè´£ï¼Œè¿åå•ä¸€èŒè´£åŸåˆ™
3. **å¢åŠ ç³»ç»Ÿå¤æ‚åº¦**ï¼šç®€å•åœºæ™¯ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼å¯èƒ½è¿‡åº¦è®¾è®¡

### ğŸ¯ é€‚ç”¨åœºæ™¯

ä¸­ä»‹è€…æ¨¡å¼ç‰¹åˆ«é€‚åˆä»¥ä¸‹å‰ç«¯åœºæ™¯ï¼š

| åœºæ™¯ | è¯´æ˜ | å…¸å‹å®ç° |
|------|------|---------|
| **å¤æ‚è¡¨å•è”åŠ¨** | å¤šä¸ªå­—æ®µäº’ç›¸å½±å“ | ç­›é€‰è¡¨å•ã€åŠ¨æ€è¡¨å• |
| **èŠå¤©å®¤/ç¾¤ç»„** | å¤šäººé€šä¿¡ | IM èŠå¤©ã€ååŒç¼–è¾‘ |
| **æ™ºèƒ½å®¶å±…ä¸­æ§** | å¤šè®¾å¤‡è”åŠ¨ | æ™ºèƒ½åœºæ™¯ã€è®¾å¤‡æ§åˆ¶ |
| **å·¥ä½œæµå¼•æ“** | å¤šèŠ‚ç‚¹åä½œ | å®¡æ‰¹æµã€æµç¨‹å›¾ |
| **ç»„ä»¶é€šä¿¡** | è·¨ç»„ä»¶é€šä¿¡ | çŠ¶æ€ç®¡ç†ã€äº‹ä»¶æ€»çº¿ |
| **æ¸¸æˆAI** | å¤šè§’è‰²åè°ƒ | NPC äº’åŠ¨ã€ä»»åŠ¡ç³»ç»Ÿ |
| **å›¾å½¢ç¼–è¾‘å™¨** | å¤šå›¾å½¢å…ƒç´ äº¤äº’ | æ‹–æ‹½ã€å¯¹é½ã€å¸é™„ |

### ğŸ¤” ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ä¸­ä»‹è€…æ¨¡å¼ï¼Ÿ

**ä¸‰ä¸ªåˆ¤æ–­æ ‡å‡†ï¼š**

1. **å¯¹è±¡ä¹‹é—´æœ‰å¤æ‚çš„ç½‘çŠ¶ä¾èµ–å—ï¼Ÿ**
   - å¤šä¸ªå¯¹è±¡äº’ç›¸è°ƒç”¨ï¼Œå½¢æˆå¤æ‚çš„ä¾èµ–ç½‘

2. **è¿™äº›å¯¹è±¡çš„äº¤äº’é€»è¾‘å¯ä»¥é›†ä¸­ç®¡ç†å—ï¼Ÿ**
   - äº¤äº’è§„åˆ™æ¸…æ™°ï¼Œå¯ä»¥ç»Ÿä¸€åè°ƒ

3. **éœ€è¦è§£è€¦å¯¹è±¡ä¹‹é—´çš„ç›´æ¥ä¾èµ–å—ï¼Ÿ**
   - å¯¹è±¡ä¹‹é—´ä¸åº”è¯¥äº’ç›¸çŸ¥é“ï¼Œåº”è¯¥é€šè¿‡ä¸­ä»‹é€šä¿¡

**å¿«é€Ÿå†³ç­–æ ‘ï¼š**

```
å¤šä¸ªå¯¹è±¡ä¹‹é—´äº’ç›¸é€šä¿¡å—ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ å¯¹è±¡æ•°é‡ > 3 ä¸ªå—ï¼Ÿ
    â”‚        â”œâ”€ æ˜¯ â†’ äº¤äº’é€»è¾‘å¤æ‚å—ï¼Ÿ
    â”‚        â”‚        â”œâ”€ æ˜¯ â†’ âœ… ç”¨ä¸­ä»‹è€…æ¨¡å¼ï¼
    â”‚        â”‚        â””â”€ å¦ â†’ ğŸ¤” çœ‹æƒ…å†µï¼Œç®€å•ç›´æ¥è°ƒç”¨ä¹Ÿè¡Œ
    â”‚        â””â”€ å¦ â†’ ğŸ¤” å¯ä»¥è€ƒè™‘å…¶ä»–æ¨¡å¼
    â””â”€ å¦ â†’ âŒ ä¸éœ€è¦
```

### ğŸ†š ä¸­ä»‹è€…æ¨¡å¼ vs è§‚å¯Ÿè€…æ¨¡å¼

| ç‰¹å¾ | ä¸­ä»‹è€…æ¨¡å¼ | è§‚å¯Ÿè€…æ¨¡å¼ |
|------|-----------|-----------|
| **é€šä¿¡æ–¹å‘** | åŒå‘ï¼ˆåŒäº‹ â†” ä¸­ä»‹è€…ï¼‰ | å•å‘ï¼ˆä¸»é¢˜ â†’ è§‚å¯Ÿè€…ï¼‰ |
| **å…³æ³¨ç‚¹** | å¯¹è±¡é—´çš„äº¤äº’ | å¯¹è±¡çŠ¶æ€çš„å˜åŒ– |
| **å¤æ‚åº¦** | ç½‘çŠ¶ â†’ æ˜Ÿå½¢ï¼ˆé™ä½è€¦åˆï¼‰ | ä¸€å¯¹å¤šï¼ˆä¾èµ–å…³ç³»ï¼‰ |
| **ä¸­é—´å±‚** | ä¸­ä»‹è€…åè°ƒäº¤äº’ | ä¸»é¢˜é€šçŸ¥è§‚å¯Ÿè€… |
| **å…¸å‹åœºæ™¯** | è¡¨å•è”åŠ¨ã€èŠå¤©å®¤ã€è®¾å¤‡è”åŠ¨ | æ•°æ®ç»‘å®šã€äº‹ä»¶ç›‘å¬ã€æ¶ˆæ¯æ¨é€ |
| **ä¸¾ä¾‹** | èˆªç©ºç®¡åˆ¶å¡”åè°ƒé£æœº | å¾®ä¿¡å…¬ä¼—å·æ¨é€æ–‡ç«  |

**ä¸¤è€…ç»“åˆï¼š**

```typescript
// ä¸­ä»‹è€…æ¨¡å¼ + è§‚å¯Ÿè€…æ¨¡å¼
class SmartMediator implements Mediator, Subject {
  // ä¸­ä»‹è€…åŠŸèƒ½ï¼šåè°ƒç»„ä»¶
  notify(sender: Colleague, event: string) {
    // åè°ƒé€»è¾‘...
  }
  
  // è§‚å¯Ÿè€…åŠŸèƒ½ï¼šé€šçŸ¥è®¢é˜…è€…
  attach(observer: Observer) {
    // è®¢é˜…...
  }
  
  notifyObservers() {
    // é€šçŸ¥...
  }
}
```

### ğŸ’¡ è®¾è®¡å»ºè®®

#### 1. é¿å…ä¸­ä»‹è€…å˜æˆ"ä¸Šå¸ç±»"

```typescript
// âŒ ä¸å¥½ï¼šæ‰€æœ‰é€»è¾‘éƒ½å †åœ¨ä¸­ä»‹è€…é‡Œ
class GodMediator {
  notify(sender, event, data) {
    // 1000 è¡Œä»£ç ...
  }
}

// âœ… å¥½ï¼šæ‹†åˆ†æˆå¤šä¸ªç­–ç•¥
class SmartMediator {
  private strategies: Map<string, Strategy>;
  
  notify(sender, event, data) {
    const strategy = this.strategies.get(event);
    strategy?.execute(data);
  }
}
```

#### 2. ä½¿ç”¨é…ç½®åŒ–çš„è”åŠ¨è§„åˆ™

```typescript
const linkageRules = [
  {
    trigger: 'provinceChange',
    actions: [
      { target: 'city', action: 'update' },
      { target: 'district', action: 'clear' },
    ],
  },
  // ... æ›´å¤šè§„åˆ™
];
```

#### 3. æ”¯æŒåŠ¨æ€æ³¨å†Œ/æ³¨é”€

```typescript
class DynamicMediator {
  private colleagues = new Map();
  
  register(id: string, colleague: Colleague) {
    this.colleagues.set(id, colleague);
  }
  
  unregister(id: string) {
    this.colleagues.delete(id);
  }
}
```

---

## ğŸ’¬ å°ç»“

ä¸­ä»‹è€…æ¨¡å¼å°±åƒç»™å¯¹è±¡ä¹‹é—´çš„é€šä¿¡è£…ä¸Šäº†"äº¤é€šæ¢çº½"ï¼Œæ‰€æœ‰å¯¹è±¡ä¸å†ç›´æ¥äº’ç›¸å–Šè¯ï¼Œè€Œæ˜¯é€šè¿‡ä¸­ä»‹è€…ç»Ÿä¸€åè°ƒã€‚

åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸­ä»‹è€…æ¨¡å¼èƒ½è®©ä½ çš„ä»£ç ï¼š
- ä»"å¯¹è±¡ä¹‹é—´äº’ç›¸è°ƒç”¨"å˜æˆ"ç»Ÿä¸€ä¸­ä»‹åè°ƒ"
- ä»"ç½‘çŠ¶ä¾èµ–"å˜æˆ"æ˜Ÿå½¢ä¾èµ–"
- ä»"æ”¹ä¸€ä¸ªå½±å“ä¸€å †"å˜æˆ"æ”¹ä¸­ä»‹è€…ä¸€å¤„å³å¯"

**è®°ä½ä¸€å¥è¯**ï¼šå½“ä½ å‘ç°å¤šä¸ªå¯¹è±¡ä¹‹é—´äº’ç›¸é€šä¿¡å˜å¾—å¤æ‚æ—¶ï¼Œå°±è¯¥è€ƒè™‘ä¸­ä»‹è€…æ¨¡å¼äº†ï¼

---

> ğŸ’¡ **æ€è€ƒé¢˜**ï¼š
> 1. ä¸­ä»‹è€…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿèƒ½å¦ç»“åˆä½¿ç”¨ï¼Ÿ
> 2. å¦‚ä½•é¿å…ä¸­ä»‹è€…å˜æˆ"ä¸Šå¸ç±»"ï¼Ÿï¼ˆæç¤ºï¼šç­–ç•¥æ¨¡å¼ã€é…ç½®åŒ–ï¼‰
> 3. åœ¨ React ä¸­ï¼ŒContext API å’Œ Redux å“ªä¸ªæ›´æ¥è¿‘ä¸­ä»‹è€…æ¨¡å¼ï¼Ÿ

---

> ğŸ“š **ç›¸å…³æ¨¡å¼**ï¼š
> - è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰ï¼šä¸­ä»‹è€…å¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼å®ç°é€šçŸ¥æœºåˆ¶
> - å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰ï¼šç®€åŒ–å­ç³»ç»Ÿæ¥å£ï¼Œä½†ä¸å¤„ç†å­ç³»ç»Ÿé—´é€šä¿¡
> - å‘½ä»¤æ¨¡å¼ï¼ˆCommandï¼‰ï¼šå¯ä»¥ç”¨æ¥å°è£…ä¸­ä»‹è€…çš„æ“ä½œæŒ‡ä»¤

