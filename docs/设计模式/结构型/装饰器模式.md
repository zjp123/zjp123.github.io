# ã€Šå‰ç«¯è®¾è®¡æ¨¡å¼å®æˆ˜æ‰‹å†Œã€‹

## ç¬¬ä¹ç« ï¼šè£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰

---

### ğŸ¯ ä¸€å¥è¯å¤§ç™½è¯

> **è£…é¥°å™¨æ¨¡å¼å°±åƒç»™æ‰‹æœºè´´è†œã€è£…æ‰‹æœºå£³ã€åŠ æŒ‡ç¯æ‰£ï¼šæ‰‹æœºæœ¬èº«çš„åŠŸèƒ½æ²¡å˜ï¼Œä½†é€šè¿‡ä¸€å±‚å±‚çš„"è£…é¥°"ï¼Œç»™å®ƒå¢åŠ äº†ä¿æŠ¤ã€é˜²æ»‘ç­‰åŠŸèƒ½ã€‚æ¯ä¸€å±‚è£…é¥°éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥éšæ„ç»„åˆï¼Œæƒ³åŠ å°±åŠ ï¼Œæƒ³å»å°±å»ã€‚**

**æ ¸å¿ƒç†å¿µï¼šåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œå°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°å™¨æ¨¡å¼æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚**

---

### ğŸ¤” ä»€ä¹ˆæ—¶å€™éœ€è¦"è£…é¥°"ï¼Ÿ

åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦ç»™ç°æœ‰åŠŸèƒ½"åŠ æ–™"çš„åœºæ™¯ï¼š

| åœºæ™¯ | ä¸ºä»€ä¹ˆéœ€è¦è£…é¥°å™¨ |
|------|----------------|
| **æƒé™æ§åˆ¶** | ç»™ç»„ä»¶æ·»åŠ æƒé™æ£€æŸ¥ï¼Œä¸ä¿®æ”¹åŸç»„ä»¶ |
| **æ—¥å¿—è®°å½•** | ç»™å‡½æ•°æ·»åŠ æ—¥å¿—åŠŸèƒ½ï¼Œä¸ä¿®æ”¹åŸå‡½æ•° |
| **æ€§èƒ½ç›‘æ§** | ç»™ç»„ä»¶æ·»åŠ æ€§èƒ½ç›‘æ§ï¼Œä¸ä¿®æ”¹åŸç»„ä»¶ |
| **ç¼“å­˜åŠŸèƒ½** | ç»™å‡½æ•°æ·»åŠ ç¼“å­˜ï¼Œä¸ä¿®æ”¹åŸå‡½æ•° |
| **é”™è¯¯å¤„ç†** | ç»™å‡½æ•°æ·»åŠ é”™è¯¯å¤„ç†ï¼Œä¸ä¿®æ”¹åŸå‡½æ•° |
| **è¡¨å•éªŒè¯** | ç»™è¡¨å•æ·»åŠ éªŒè¯é€»è¾‘ï¼Œä¸ä¿®æ”¹åŸè¡¨å• |
| **Loading çŠ¶æ€** | ç»™ç»„ä»¶æ·»åŠ  Loadingï¼Œä¸ä¿®æ”¹åŸç»„ä»¶ |

---

### ğŸ˜« å‰ç«¯ç—›ç‚¹ï¼šæ²¡æœ‰è£…é¥°å™¨æ—¶çš„å™©æ¢¦

#### åœºæ™¯ä¸€ï¼šæƒé™æ§åˆ¶ä»£ç é‡å¤

```tsx
// âŒ å™©æ¢¦ä»£ç ï¼šæ¯ä¸ªéœ€è¦æƒé™çš„ç»„ä»¶éƒ½è¦å†™ä¸€éæ£€æŸ¥é€»è¾‘

const UserList: React.FC = () => {
  const { user } = useUser();
  
  // æƒé™æ£€æŸ¥é€»è¾‘é‡å¤å†™
  if (!user.permissions.includes('user:view')) {
    return <div>æ²¡æœ‰æƒé™</div>;
  }
  
  return <div>ç”¨æˆ·åˆ—è¡¨</div>;
};

const UserCreate: React.FC = () => {
  const { user } = useUser();
  
  // åˆæ˜¯åŒæ ·çš„æƒé™æ£€æŸ¥é€»è¾‘
  if (!user.permissions.includes('user:create')) {
    return <div>æ²¡æœ‰æƒé™</div>;
  }
  
  return <div>åˆ›å»ºç”¨æˆ·</div>;
};

// é—®é¢˜ï¼š
// 1. æƒé™æ£€æŸ¥é€»è¾‘é‡å¤
// 2. è¦æ”¹æƒé™é€»è¾‘ï¼Ÿæ”¹ N ä¸ªåœ°æ–¹
// 3. ç»„ä»¶ä»£ç å’Œæƒé™é€»è¾‘è€¦åˆ
```

#### åœºæ™¯äºŒï¼šæ—¥å¿—è®°å½•æ•£è½å„å¤„

```tsx
// âŒ å™©æ¢¦ä»£ç ï¼šæ¯ä¸ªå‡½æ•°éƒ½è¦æ‰‹åŠ¨åŠ æ—¥å¿—

const fetchUsers = async () => {
  console.log('[API] å¼€å§‹è¯·æ±‚ç”¨æˆ·åˆ—è¡¨');
  const startTime = Date.now();
  
  try {
    const response = await fetch('/api/users');
    const data = await response.json();
    
    console.log('[API] è¯·æ±‚æˆåŠŸ', { duration: Date.now() - startTime });
    return data;
  } catch (error) {
    console.error('[API] è¯·æ±‚å¤±è´¥', error);
    throw error;
  }
};

const fetchOrders = async () => {
  console.log('[API] å¼€å§‹è¯·æ±‚è®¢å•åˆ—è¡¨');  // é‡å¤ä»£ç 
  const startTime = Date.now();  // é‡å¤ä»£ç 
  
  try {
    const response = await fetch('/api/orders');
    const data = await response.json();
    
    console.log('[API] è¯·æ±‚æˆåŠŸ', { duration: Date.now() - startTime });  // é‡å¤ä»£ç 
    return data;
  } catch (error) {
    console.error('[API] è¯·æ±‚å¤±è´¥', error);  // é‡å¤ä»£ç 
    throw error;
  }
};

// é—®é¢˜ï¼š
// 1. æ—¥å¿—ä»£ç é‡å¤
// 2. è¦æ”¹æ—¥å¿—æ ¼å¼ï¼Ÿæ”¹ N ä¸ªåœ°æ–¹
// 3. ä¸šåŠ¡é€»è¾‘å’Œæ—¥å¿—é€»è¾‘æ··åœ¨ä¸€èµ·
```

#### åœºæ™¯ä¸‰ï¼šç»„ä»¶åŠŸèƒ½å åŠ å›°éš¾

```tsx
// âŒ å™©æ¢¦ä»£ç ï¼šéœ€è¦å¤šä¸ªåŠŸèƒ½æ—¶ï¼Œä»£ç å˜å¾—å¤æ‚

const UserList: React.FC = () => {
  const { user } = useUser();
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  
  // æƒé™æ£€æŸ¥
  if (!user.permissions.includes('user:view')) {
    return <div>æ²¡æœ‰æƒé™</div>;
  }
  
  // Loading çŠ¶æ€
  if (loading) {
    return <Spin />;
  }
  
  // é”™è¯¯å¤„ç†
  if (error) {
    return <Alert message={error} type="error" />;
  }
  
  // ä¸šåŠ¡é€»è¾‘
  return <div>ç”¨æˆ·åˆ—è¡¨</div>;
};

// é—®é¢˜ï¼š
// 1. ç»„ä»¶ä»£ç è‡ƒè‚¿
// 2. åŠŸèƒ½å åŠ æ—¶ï¼Œä»£ç å¤æ‚åº¦æŒ‡æ•°å¢é•¿
// 3. æ— æ³•å¤ç”¨è¿™äº›"æ¨ªåˆ‡å…³æ³¨ç‚¹"
```

**è¿™äº›ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ**

| é—®é¢˜ | æè¿° |
|------|------|
| ğŸ”´ **ä»£ç é‡å¤** | ç›¸åŒçš„æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆæƒé™ã€æ—¥å¿—ã€é”™è¯¯å¤„ç†ï¼‰é‡å¤å†™ |
| ğŸ”´ **èŒè´£æ··ä¹±** | ä¸šåŠ¡é€»è¾‘å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹æ··åœ¨ä¸€èµ· |
| ğŸ”´ **éš¾ä»¥å¤ç”¨** | æ— æ³•å¤ç”¨æƒé™æ£€æŸ¥ã€æ—¥å¿—è®°å½•ç­‰åŠŸèƒ½ |
| ğŸ”´ **éš¾ä»¥ç»´æŠ¤** | è¦æ”¹æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Ÿæ”¹ N ä¸ªåœ°æ–¹ |

---

### ğŸ’¡ æ¨¡å¼æ ¸å¿ƒæ¦‚å¿µ

è£…é¥°å™¨æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š

> **åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œå°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°å™¨æ¨¡å¼æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚**

ç”¨å¤§ç™½è¯è¯´å°±æ˜¯ï¼š
- **ç»„ä»¶ï¼ˆComponentï¼‰**ï¼šè¢«è£…é¥°çš„åŸå§‹å¯¹è±¡
- **è£…é¥°å™¨ï¼ˆDecoratorï¼‰**ï¼šåŒ…è£…ç»„ä»¶ï¼Œæ·»åŠ é¢å¤–åŠŸèƒ½
- **å…·ä½“è£…é¥°å™¨ï¼ˆConcrete Decoratorï¼‰**ï¼šå®ç°å…·ä½“çš„è£…é¥°åŠŸèƒ½
- **å®¢æˆ·ç«¯ï¼ˆClientï¼‰**ï¼šé€šè¿‡è£…é¥°å™¨ä½¿ç”¨ç»„ä»¶ï¼Œä¸éœ€è¦çŸ¥é“è£…é¥°çš„å­˜åœ¨

**è£…é¥°å™¨æ¨¡å¼çš„ç»“æ„ï¼š**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Component     â”‚  â† è¢«è£…é¥°çš„æ¥å£
â”‚  (ç»„ä»¶æ¥å£)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + operation()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Decorator     â”‚  â† è£…é¥°å™¨åŸºç±»
â”‚  (è£…é¥°å™¨)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - component     â”‚
â”‚ + operation()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Concrete â”‚ â”‚Concrete  â”‚
â”‚Decoratorâ”‚ â”‚Decorator â”‚
â”‚   A     â”‚ â”‚   B      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç±»æ¯”ç†è§£ï¼š**

```
æ²¡æœ‰è£…é¥°å™¨ï¼šè¦åŠ åŠŸèƒ½ï¼Ÿæ”¹åŸä»£ç  â†’ è¿åå¼€é—­åŸåˆ™
æœ‰è£…é¥°å™¨ï¼šè¦åŠ åŠŸèƒ½ï¼ŸåŒ…ä¸€å±‚è£…é¥°å™¨ â†’ ä¸ä¿®æ”¹åŸä»£ç 
```

---

### ğŸ”§ å‰ç«¯å®æˆ˜æ¡ˆä¾‹ä¸€ï¼šé«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰è£…é¥°å™¨

#### åœºæ™¯æè¿°

ä½¿ç”¨é«˜é˜¶ç»„ä»¶å®ç°è£…é¥°å™¨æ¨¡å¼ï¼Œç»™ç»„ä»¶æ·»åŠ æƒé™æ§åˆ¶ã€Loadingã€é”™è¯¯å¤„ç†ç­‰åŠŸèƒ½ã€‚

```tsx
// decorators/withPermission.tsx

import React from 'react';
import { Result } from 'antd';

/**
 * æƒé™è£…é¥°å™¨ï¼ˆHOCï¼‰
 * 
 * ç»™ç»„ä»¶æ·»åŠ æƒé™æ£€æŸ¥åŠŸèƒ½
 */
export function withPermission<P extends object>(
  permission: string,
  fallback?: React.ReactNode
) {
  return function (Component: React.ComponentType<P>) {
    const WithPermissionComponent: React.FC<P> = (props) => {
      const { user } = useUser();  // å‡è®¾æœ‰ useUser hook
      
      if (!user.permissions.includes(permission)) {
        return fallback || (
          <Result
            status="403"
            title="403"
            subTitle="æŠ±æ­‰ï¼Œæ‚¨æ²¡æœ‰æƒé™è®¿é—®æ­¤é¡µé¢ã€‚"
          />
        );
      }
      
      return <Component {...props} />;
    };
    
    WithPermissionComponent.displayName = `withPermission(${Component.displayName || Component.name})`;
    
    return WithPermissionComponent;
  };
}

// å‡è®¾çš„ useUser hook
function useUser() {
  return {
    user: {
      permissions: ['user:view', 'user:create'],
    },
  };
}
```

```tsx
// decorators/withLoading.tsx

import React, { useState, useEffect } from 'react';
import { Spin } from 'antd';

/**
 * Loading è£…é¥°å™¨ï¼ˆHOCï¼‰
 * 
 * ç»™ç»„ä»¶æ·»åŠ  Loading çŠ¶æ€
 */
export function withLoading<P extends object>(
  Component: React.ComponentType<P>,
  fetchData?: (props: P) => Promise<any>
) {
  const WithLoadingComponent: React.FC<P> = (props) => {
    const [loading, setLoading] = useState(true);
    const [data, setData] = useState<any>(null);
    
    useEffect(() => {
      if (fetchData) {
        fetchData(props)
          .then(setData)
          .finally(() => setLoading(false));
      } else {
        setLoading(false);
      }
    }, []);
    
    if (loading) {
      return (
        <div style={{ padding: '50px', textAlign: 'center' }}>
          <Spin size="large" />
        </div>
      );
    }
    
    return <Component {...props} data={data} />;
  };
  
  WithLoadingComponent.displayName = `withLoading(${Component.displayName || Component.name})`;
  
  return WithLoadingComponent;
}
```

```tsx
// decorators/withErrorBoundary.tsx

import React, { Component, ErrorInfo, ReactNode } from 'react';
import { Result, Button } from 'antd';

/**
 * é”™è¯¯è¾¹ç•Œè£…é¥°å™¨ï¼ˆHOCï¼‰
 * 
 * ç»™ç»„ä»¶æ·»åŠ é”™è¯¯å¤„ç†åŠŸèƒ½
 */
export function withErrorBoundary<P extends object>(
  Component: React.ComponentType<P>,
  fallback?: (error: Error, errorInfo: ErrorInfo) => ReactNode
) {
  class WithErrorBoundary extends React.Component<P, { hasError: boolean; error?: Error }> {
    constructor(props: P) {
      super(props);
      this.state = { hasError: false };
    }
    
    static getDerivedStateFromError(error: Error) {
      return { hasError: true, error };
    }
    
    componentDidCatch(error: Error, errorInfo: ErrorInfo) {
      console.error('ç»„ä»¶é”™è¯¯:', error, errorInfo);
    }
    
    render() {
      if (this.state.hasError) {
        if (fallback) {
          return fallback(this.state.error!, {} as ErrorInfo);
        }
        
        return (
          <Result
            status="error"
            title="å‡ºé”™äº†"
            subTitle={this.state.error?.message || 'å‘ç”Ÿäº†æœªçŸ¥é”™è¯¯'}
            extra={
              <Button type="primary" onClick={() => this.setState({ hasError: false })}>
                é‡è¯•
              </Button>
            }
          />
        );
      }
      
      return <Component {...this.props} />;
    }
  }
  
  WithErrorBoundary.displayName = `withErrorBoundary(${Component.displayName || Component.name})`;
  
  return WithErrorBoundary;
}
```

#### ä¸šåŠ¡ä¸­ä½¿ç”¨

```tsx
// components/UserList.tsx

import React from 'react';
import { Table } from 'antd';
import { withPermission } from '../decorators/withPermission';
import { withLoading } from '../decorators/withLoading';
import { withErrorBoundary } from '../decorators/withErrorBoundary';

// åŸå§‹ç»„ä»¶ï¼ˆåªå…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼‰
const UserListBase: React.FC<{ data?: any[] }> = ({ data = [] }) => {
  return (
    <Table
      dataSource={data}
      columns={[
        { title: 'ID', dataIndex: 'id' },
        { title: 'å§“å', dataIndex: 'name' },
        { title: 'é‚®ç®±', dataIndex: 'email' },
      ]}
    />
  );
};

// âœ… ä½¿ç”¨è£…é¥°å™¨å åŠ åŠŸèƒ½
// 1. å…ˆåŠ æƒé™æ£€æŸ¥
const UserListWithPermission = withPermission('user:view')(UserListBase);

// 2. å†åŠ  Loading
const UserListWithLoading = withLoading(
  UserListWithPermission,
  async () => {
    const response = await fetch('/api/users');
    return response.json();
  }
);

// 3. æœ€ååŠ é”™è¯¯å¤„ç†
export const UserList = withErrorBoundary(UserListWithLoading);

// æˆ–è€…é“¾å¼è°ƒç”¨ï¼ˆæ›´ä¼˜é›…ï¼‰
export const UserList = withErrorBoundary(
  withLoading(
    withPermission('user:view')(UserListBase),
    async () => {
      const response = await fetch('/api/users');
      return response.json();
    }
  )
);
```

---

### ğŸ”§ å‰ç«¯å®æˆ˜æ¡ˆä¾‹äºŒï¼šå‡½æ•°è£…é¥°å™¨

#### åœºæ™¯æè¿°

ä½¿ç”¨è£…é¥°å™¨æ¨¡å¼ç»™å‡½æ•°æ·»åŠ æ—¥å¿—ã€ç¼“å­˜ã€é‡è¯•ç­‰åŠŸèƒ½ã€‚

```tsx
// decorators/functionDecorators.ts

/**
 * æ—¥å¿—è£…é¥°å™¨
 * 
 * ç»™å‡½æ•°æ·»åŠ æ—¥å¿—è®°å½•åŠŸèƒ½
 */
export function log(target: any, propertyName: string, descriptor: PropertyDescriptor) {
  const method = descriptor.value;
  
  descriptor.value = async function (...args: any[]) {
    const startTime = Date.now();
    const funcName = `${target.constructor.name}.${propertyName}`;
    
    console.log(`[LOG] ${funcName} è°ƒç”¨`, { args });
    
    try {
      const result = await method.apply(this, args);
      const duration = Date.now() - startTime;
      
      console.log(`[LOG] ${funcName} æˆåŠŸ`, { duration, result });
      
      return result;
    } catch (error) {
      const duration = Date.now() - startTime;
      
      console.error(`[LOG] ${funcName} å¤±è´¥`, { duration, error });
      
      throw error;
    }
  };
  
  return descriptor;
}

/**
 * ç¼“å­˜è£…é¥°å™¨
 * 
 * ç»™å‡½æ•°æ·»åŠ ç¼“å­˜åŠŸèƒ½
 */
export function cache(ttl: number = 60000) {
  return function (target: any, propertyName: string, descriptor: PropertyDescriptor) {
    const method = descriptor.value;
    const cacheMap = new Map<string, { data: any; expireAt: number }>();
    
    descriptor.value = async function (...args: any[]) {
      const cacheKey = JSON.stringify(args);
      const cached = cacheMap.get(cacheKey);
      
      // æ£€æŸ¥ç¼“å­˜æ˜¯å¦æœ‰æ•ˆ
      if (cached && Date.now() < cached.expireAt) {
        console.log(`[CACHE] ${propertyName} å‘½ä¸­ç¼“å­˜`);
        return cached.data;
      }
      
      // è°ƒç”¨åŸå‡½æ•°
      const result = await method.apply(this, args);
      
      // å­˜å…¥ç¼“å­˜
      cacheMap.set(cacheKey, {
        data: result,
        expireAt: Date.now() + ttl,
      });
      
      return result;
    };
    
    return descriptor;
  };
}

/**
 * é‡è¯•è£…é¥°å™¨
 * 
 * ç»™å‡½æ•°æ·»åŠ é‡è¯•åŠŸèƒ½
 */
export function retry(maxAttempts: number = 3, delay: number = 1000) {
  return function (target: any, propertyName: string, descriptor: PropertyDescriptor) {
    const method = descriptor.value;
    
    descriptor.value = async function (...args: any[]) {
      let lastError: Error | null = null;
      
      for (let attempt = 1; attempt <= maxAttempts; attempt++) {
        try {
          return await method.apply(this, args);
        } catch (error) {
          lastError = error as Error;
          
          if (attempt < maxAttempts) {
            console.warn(`[RETRY] ${propertyName} ç¬¬ ${attempt} æ¬¡å¤±è´¥ï¼Œ${delay}ms åé‡è¯•`);
            await new Promise(resolve => setTimeout(resolve, delay));
          }
        }
      }
      
      console.error(`[RETRY] ${propertyName} é‡è¯• ${maxAttempts} æ¬¡åä»ç„¶å¤±è´¥`);
      throw lastError;
    };
    
    return descriptor;
  };
}

/**
 * é˜²æŠ–è£…é¥°å™¨
 * 
 * ç»™å‡½æ•°æ·»åŠ é˜²æŠ–åŠŸèƒ½
 */
export function debounce(delay: number = 300) {
  return function (target: any, propertyName: string, descriptor: PropertyDescriptor) {
    const method = descriptor.value;
    let timeoutId: NodeJS.Timeout | null = null;
    
    descriptor.value = function (...args: any[]) {
      if (timeoutId) {
        clearTimeout(timeoutId);
      }
      
      timeoutId = setTimeout(() => {
        method.apply(this, args);
      }, delay);
    };
    
    return descriptor;
  };
}

/**
 * èŠ‚æµè£…é¥°å™¨
 * 
 * ç»™å‡½æ•°æ·»åŠ èŠ‚æµåŠŸèƒ½
 */
export function throttle(delay: number = 300) {
  return function (target: any, propertyName: string, descriptor: PropertyDescriptor) {
    const method = descriptor.value;
    let lastCallTime = 0;
    
    descriptor.value = function (...args: any[]) {
      const now = Date.now();
      
      if (now - lastCallTime >= delay) {
        lastCallTime = now;
        method.apply(this, args);
      }
    };
    
    return descriptor;
  };
}
```

#### ä¸šåŠ¡ä¸­ä½¿ç”¨

```tsx
// services/userService.ts

import { log, cache, retry } from '../decorators/functionDecorators';

class UserService {
  /**
   * è·å–ç”¨æˆ·åˆ—è¡¨
   * 
   * âœ… ä½¿ç”¨è£…é¥°å™¨æ·»åŠ åŠŸèƒ½ï¼š
   * - @log: è‡ªåŠ¨è®°å½•æ—¥å¿—
   * - @cache(300000): ç¼“å­˜ 5 åˆ†é’Ÿ
   * - @retry(3): å¤±è´¥é‡è¯• 3 æ¬¡
   */
  @log
  @cache(300000)
  @retry(3)
  async getUsers(params: { page: number; size: number }) {
    const response = await fetch(`/api/users?page=${params.page}&size=${params.size}`);
    
    if (!response.ok) {
      throw new Error('è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥');
    }
    
    return response.json();
  }
  
  /**
   * åˆ›å»ºç”¨æˆ·
   * 
   * âœ… åªæ·»åŠ æ—¥å¿—è£…é¥°å™¨
   */
  @log
  async createUser(userData: { name: string; email: string }) {
    const response = await fetch('/api/users', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(userData),
    });
    
    if (!response.ok) {
      throw new Error('åˆ›å»ºç”¨æˆ·å¤±è´¥');
    }
    
    return response.json();
  }
}

export const userService = new UserService();

// ä½¿ç”¨
const users = await userService.getUsers({ page: 1, size: 10 });
// è‡ªåŠ¨ï¼š
// 1. è®°å½•æ—¥å¿—
// 2. ä½¿ç”¨ç¼“å­˜ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
// 3. å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•
```

---

### ğŸ”§ å‰ç«¯å®æˆ˜æ¡ˆä¾‹ä¸‰ï¼šè¡¨å•éªŒè¯è£…é¥°å™¨

#### åœºæ™¯æè¿°

ä½¿ç”¨è£…é¥°å™¨æ¨¡å¼ç»™è¡¨å•å­—æ®µæ·»åŠ éªŒè¯è§„åˆ™ã€‚

```tsx
// decorators/formDecorators.ts

import { FormInstance } from 'antd/es/form';

/**
 * è¡¨å•éªŒè¯è§„åˆ™
 */
interface ValidationRule {
  required?: boolean;
  message?: string;
  validator?: (value: any) => boolean | Promise<boolean>;
  min?: number;
  max?: number;
  pattern?: RegExp;
}

/**
 * è¡¨å•å­—æ®µè£…é¥°å™¨
 * 
 * ç»™è¡¨å•å­—æ®µæ·»åŠ éªŒè¯è§„åˆ™
 */
export function validateField(rules: ValidationRule[]) {
  return function (target: any, propertyName: string, descriptor: PropertyDescriptor) {
    const originalMethod = descriptor.value;
    
    // å­˜å‚¨éªŒè¯è§„åˆ™
    if (!target.__validationRules) {
      target.__validationRules = new Map();
    }
    target.__validationRules.set(propertyName, rules);
    
    descriptor.value = function (form: FormInstance, fieldName: string, value: any) {
      // æ‰§è¡ŒéªŒè¯
      for (const rule of rules) {
        if (rule.required && (value === undefined || value === null || value === '')) {
          form.setFields([{
            name: fieldName,
            errors: [rule.message || `${fieldName}æ˜¯å¿…å¡«é¡¹`],
          }]);
          return false;
        }
        
        if (rule.min !== undefined && value.length < rule.min) {
          form.setFields([{
            name: fieldName,
            errors: [rule.message || `${fieldName}æœ€å°‘${rule.min}ä¸ªå­—ç¬¦`],
          }]);
          return false;
        }
        
        if (rule.max !== undefined && value.length > rule.max) {
          form.setFields([{
            name: fieldName,
            errors: [rule.message || `${fieldName}æœ€å¤š${rule.max}ä¸ªå­—ç¬¦`],
          }]);
          return false;
        }
        
        if (rule.pattern && !rule.pattern.test(value)) {
          form.setFields([{
            name: fieldName,
            errors: [rule.message || `${fieldName}æ ¼å¼ä¸æ­£ç¡®`],
          }]);
          return false;
        }
        
        if (rule.validator && !rule.validator(value)) {
          form.setFields([{
            name: fieldName,
            errors: [rule.message || `${fieldName}éªŒè¯å¤±è´¥`],
          }]);
          return false;
        }
      }
      
      // éªŒè¯é€šè¿‡ï¼Œæ¸…é™¤é”™è¯¯
      form.setFields([{ name: fieldName, errors: [] }]);
      
      return originalMethod.apply(this, [form, fieldName, value]);
    };
    
    return descriptor;
  };
}

/**
 * è·å–å­—æ®µçš„éªŒè¯è§„åˆ™
 */
export function getFieldRules(target: any, propertyName: string): ValidationRule[] {
  return target.__validationRules?.get(propertyName) || [];
}
```

#### ä¸šåŠ¡ä¸­ä½¿ç”¨

```tsx
// components/UserForm.tsx

import React from 'react';
import { Form, Input, Button } from 'antd';
import { validateField } from '../decorators/formDecorators';

class UserFormHandler {
  /**
   * å¤„ç†ç”¨æˆ·åè¾“å…¥
   * 
   * âœ… ä½¿ç”¨è£…é¥°å™¨æ·»åŠ éªŒè¯è§„åˆ™
   */
  @validateField([
    { required: true, message: 'è¯·è¾“å…¥ç”¨æˆ·å' },
    { min: 2, max: 20, message: 'ç”¨æˆ·åé•¿åº¦ä¸º2-20ä¸ªå­—ç¬¦' },
    { pattern: /^[a-zA-Z0-9_]+$/, message: 'ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿' },
  ])
  handleUsernameChange(form: FormInstance, fieldName: string, value: string) {
    // ä¸šåŠ¡é€»è¾‘
    console.log('ç”¨æˆ·å:', value);
  }
  
  /**
   * å¤„ç†é‚®ç®±è¾“å…¥
   */
  @validateField([
    { required: true, message: 'è¯·è¾“å…¥é‚®ç®±' },
    { pattern: /^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/, message: 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®' },
  ])
  handleEmailChange(form: FormInstance, fieldName: string, value: string) {
    console.log('é‚®ç®±:', value);
  }
}

const handler = new UserFormHandler();

export const UserForm: React.FC = () => {
  const [form] = Form.useForm();
  
  return (
    <Form form={form}>
      <Form.Item name="username" label="ç”¨æˆ·å">
        <Input
          onChange={(e) => handler.handleUsernameChange(form, 'username', e.target.value)}
        />
      </Form.Item>
      
      <Form.Item name="email" label="é‚®ç®±">
        <Input
          onChange={(e) => handler.handleEmailChange(form, 'email', e.target.value)}
        />
      </Form.Item>
      
      <Form.Item>
        <Button type="primary" htmlType="submit">
          æäº¤
        </Button>
      </Form.Item>
    </Form>
  );
};
```

---

### ğŸ”§ å‰ç«¯å®æˆ˜æ¡ˆä¾‹å››ï¼šæ€§èƒ½ç›‘æ§è£…é¥°å™¨

#### åœºæ™¯æè¿°

ä½¿ç”¨è£…é¥°å™¨æ¨¡å¼ç»™ç»„ä»¶æ·»åŠ æ€§èƒ½ç›‘æ§åŠŸèƒ½ã€‚

```tsx
// decorators/withPerformance.tsx

import React, { useEffect, useRef } from 'react';

/**
 * æ€§èƒ½ç›‘æ§è£…é¥°å™¨ï¼ˆHOCï¼‰
 * 
 * ç»™ç»„ä»¶æ·»åŠ æ€§èƒ½ç›‘æ§åŠŸèƒ½
 */
export function withPerformance<P extends object>(
  Component: React.ComponentType<P>,
  componentName?: string
) {
  const WithPerformanceComponent: React.FC<P> = (props) => {
    const renderStartTime = useRef<number>(0);
    const mountStartTime = useRef<number>(0);
    
    // è®°å½•æŒ‚è½½å¼€å§‹æ—¶é—´
    useEffect(() => {
      mountStartTime.current = performance.now();
      
      return () => {
        // ç»„ä»¶å¸è½½æ—¶è®°å½•æ€»æ—¶é•¿
        const totalTime = performance.now() - mountStartTime.current;
        console.log(`[PERF] ${componentName || Component.name} æ€»ç”Ÿå‘½å‘¨æœŸ: ${totalTime.toFixed(2)}ms`);
      };
    }, []);
    
    // è®°å½•æ¸²æŸ“å¼€å§‹æ—¶é—´
    renderStartTime.current = performance.now();
    
    useEffect(() => {
      // æ¸²æŸ“å®Œæˆåè®°å½•æ¸²æŸ“æ—¶é•¿
      const renderTime = performance.now() - renderStartTime.current;
      console.log(`[PERF] ${componentName || Component.name} æ¸²æŸ“è€—æ—¶: ${renderTime.toFixed(2)}ms`);
    });
    
    return <Component {...props} />;
  };
  
  WithPerformanceComponent.displayName = `withPerformance(${Component.displayName || Component.name})`;
  
  return WithPerformanceComponent;
}

/**
 * å‡½æ•°æ€§èƒ½ç›‘æ§è£…é¥°å™¨
 */
export function measurePerformance(target: any, propertyName: string, descriptor: PropertyDescriptor) {
  const method = descriptor.value;
  
  descriptor.value = async function (...args: any[]) {
    const startTime = performance.now();
    const funcName = `${target.constructor.name}.${propertyName}`;
    
    try {
      const result = await method.apply(this, args);
      const duration = performance.now() - startTime;
      
      // å¦‚æœæ‰§è¡Œæ—¶é—´è¶…è¿‡é˜ˆå€¼ï¼Œè®°å½•è­¦å‘Š
      if (duration > 1000) {
        console.warn(`[PERF] ${funcName} æ‰§è¡Œæ—¶é—´è¾ƒé•¿: ${duration.toFixed(2)}ms`);
      } else {
        console.log(`[PERF] ${funcName} æ‰§è¡Œæ—¶é—´: ${duration.toFixed(2)}ms`);
      }
      
      return result;
    } catch (error) {
      const duration = performance.now() - startTime;
      console.error(`[PERF] ${funcName} æ‰§è¡Œå¤±è´¥ï¼Œè€—æ—¶: ${duration.toFixed(2)}ms`);
      throw error;
    }
  };
  
  return descriptor;
}
```

#### ä¸šåŠ¡ä¸­ä½¿ç”¨

```tsx
// components/ExpensiveComponent.tsx

import React from 'react';
import { withPerformance } from '../decorators/withPerformance';

// åŸå§‹ç»„ä»¶ï¼ˆå¯èƒ½æœ‰æ€§èƒ½é—®é¢˜ï¼‰
const ExpensiveComponentBase: React.FC = () => {
  // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
  const data = Array.from({ length: 10000 }, (_, i) => ({
    id: i,
    name: `Item ${i}`,
  }));
  
  return (
    <div>
      {data.map(item => (
        <div key={item.id}>{item.name}</div>
      ))}
    </div>
  );
};

// âœ… ä½¿ç”¨æ€§èƒ½ç›‘æ§è£…é¥°å™¨
export const ExpensiveComponent = withPerformance(ExpensiveComponentBase, 'ExpensiveComponent');

// ä½¿ç”¨å‡½æ•°æ€§èƒ½ç›‘æ§
class DataService {
  @measurePerformance
  async processLargeData(data: any[]) {
    // å¤„ç†å¤§é‡æ•°æ®
    return data.map(item => ({ ...item, processed: true }));
  }
}
```

---

### ğŸ”§ å‰ç«¯å®æˆ˜æ¡ˆä¾‹äº”ï¼šç»„åˆè£…é¥°å™¨

#### åœºæ™¯æè¿°

å°†å¤šä¸ªè£…é¥°å™¨ç»„åˆä½¿ç”¨ï¼Œå®ç°åŠŸèƒ½çš„å åŠ ã€‚

```tsx
// decorators/composeDecorators.tsx

import React from 'react';
import { withPermission } from './withPermission';
import { withLoading } from './withLoading';
import { withErrorBoundary } from './withErrorBoundary';
import { withPerformance } from './withPerformance';

/**
 * ç»„åˆè£…é¥°å™¨
 * 
 * å°†å¤šä¸ªè£…é¥°å™¨ç»„åˆåœ¨ä¸€èµ·
 */
export function composeDecorators<P extends object>(
  ...decorators: Array<(Component: React.ComponentType<P>) => React.ComponentType<P>>
) {
  return function (Component: React.ComponentType<P>) {
    return decorators.reduceRight(
      (AccumulatedComponent, decorator) => decorator(AccumulatedComponent),
      Component
    );
  };
}

/**
 * é¢„è®¾è£…é¥°å™¨ç»„åˆ
 */
export const withCommonDecorators = composeDecorators(
  withErrorBoundary,
  withPerformance,
);

/**
 * å¸¦æƒé™çš„é¡µé¢è£…é¥°å™¨ç»„åˆ
 */
export function withPageDecorators<P extends object>(
  permission?: string,
  fetchData?: (props: P) => Promise<any>
) {
  const decorators: Array<(Component: React.ComponentType<P>) => React.ComponentType<P>> = [
    withErrorBoundary,
    withPerformance,
  ];
  
  if (permission) {
    decorators.push(withPermission(permission));
  }
  
  if (fetchData) {
    decorators.push(withLoading(fetchData));
  }
  
  return composeDecorators(...decorators);
}
```

#### ä¸šåŠ¡ä¸­ä½¿ç”¨

```tsx
// components/UserList.tsx

import React from 'react';
import { Table } from 'antd';
import { withPageDecorators } from '../decorators/composeDecorators';

// åŸå§‹ç»„ä»¶
const UserListBase: React.FC<{ data?: any[] }> = ({ data = [] }) => {
  return (
    <Table
      dataSource={data}
      columns={[
        { title: 'ID', dataIndex: 'id' },
        { title: 'å§“å', dataIndex: 'name' },
        { title: 'é‚®ç®±', dataIndex: 'email' },
      ]}
    />
  );
};

// âœ… ä½¿ç”¨ç»„åˆè£…é¥°å™¨ï¼Œä¸€æ¬¡æ€§æ·»åŠ æ‰€æœ‰åŠŸèƒ½
export const UserList = withPageDecorators(
  'user:view',  // æƒé™
  async () => {  // æ•°æ®è·å–
    const response = await fetch('/api/users');
    return response.json();
  }
)(UserListBase);

// ç»„ä»¶è‡ªåŠ¨å…·å¤‡ï¼š
// 1. æƒé™æ£€æŸ¥
// 2. Loading çŠ¶æ€
// 3. é”™è¯¯å¤„ç†
// 4. æ€§èƒ½ç›‘æ§
```

---

### ğŸ“Š æ¨¡å¼æ€»ç»“

#### âœ… ä¼˜ç‚¹

| ä¼˜ç‚¹ | è¯´æ˜ |
|------|------|
| **åŠ¨æ€æ·»åŠ åŠŸèƒ½** | å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ åŠŸèƒ½ï¼Œä¸éœ€è¦ä¿®æ”¹åŸä»£ç  |
| **åŠŸèƒ½ç»„åˆçµæ´»** | å¯ä»¥çµæ´»ç»„åˆå¤šä¸ªè£…é¥°å™¨ |
| **ç¬¦åˆå¼€é—­åŸåˆ™** | å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ |
| **èŒè´£åˆ†ç¦»** | ä¸šåŠ¡é€»è¾‘å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦» |
| **æ˜“äºå¤ç”¨** | è£…é¥°å™¨å¯ä»¥åœ¨å¤šå¤„å¤ç”¨ |

#### âŒ ç¼ºç‚¹

| ç¼ºç‚¹ | è¯´æ˜ |
|------|------|
| **å¢åŠ å¤æ‚åº¦** | è£…é¥°å™¨é“¾å¯èƒ½å¾ˆé•¿ï¼Œéš¾ä»¥ç†è§£ |
| **è°ƒè¯•å›°éš¾** | å¤šå±‚è£…é¥°å™¨åŒ…è£…ï¼Œè°ƒè¯•æ—¶è°ƒç”¨æ ˆè¾ƒæ·± |
| **æ€§èƒ½å¼€é”€** | æ¯å±‚è£…é¥°å™¨éƒ½æœ‰ä¸€å®šçš„æ€§èƒ½å¼€é”€ |
| **ç±»å‹å®‰å…¨** | TypeScript ä¸­è£…é¥°å™¨çš„ç±»å‹æ¨å¯¼å¯èƒ½å¤æ‚ |

#### ğŸ¯ é€‚ç”¨åœºæ™¯

| åœºæ™¯ | ç¤ºä¾‹ |
|------|------|
| **æƒé™æ§åˆ¶** | ç»™ç»„ä»¶æ·»åŠ æƒé™æ£€æŸ¥ |
| **æ—¥å¿—è®°å½•** | ç»™å‡½æ•°æ·»åŠ æ—¥å¿—åŠŸèƒ½ |
| **æ€§èƒ½ç›‘æ§** | ç»™ç»„ä»¶/å‡½æ•°æ·»åŠ æ€§èƒ½ç›‘æ§ |
| **ç¼“å­˜åŠŸèƒ½** | ç»™å‡½æ•°æ·»åŠ ç¼“å­˜ |
| **é”™è¯¯å¤„ç†** | ç»™ç»„ä»¶æ·»åŠ é”™è¯¯è¾¹ç•Œ |
| **è¡¨å•éªŒè¯** | ç»™è¡¨å•å­—æ®µæ·»åŠ éªŒè¯è§„åˆ™ |

#### ğŸš« ä¸é€‚ç”¨åœºæ™¯

- åŠŸèƒ½ç®€å•ï¼Œä¸éœ€è¦åŠ¨æ€æ·»åŠ 
- æ€§èƒ½è¦æ±‚æé«˜ï¼Œè£…é¥°å™¨å¼€é”€ä¸å¯æ¥å—
- è£…é¥°å™¨é“¾è¿‡é•¿ï¼Œå½±å“å¯è¯»æ€§

---

### ğŸ”„ ä¸å…¶ä»–æ¨¡å¼çš„åŒºåˆ«

| æ¨¡å¼ | å…³æ³¨ç‚¹ | åŒºåˆ« |
|------|--------|------|
| **è£…é¥°å™¨æ¨¡å¼** | åŠŸèƒ½å¢å¼º | åŠ¨æ€æ·»åŠ åŠŸèƒ½ï¼Œä¸æ”¹å˜æ¥å£ |
| **é€‚é…å™¨æ¨¡å¼** | æ¥å£è½¬æ¢ | æ”¹å˜æ¥å£ï¼Œè®©ä¸å…¼å®¹çš„æ¥å£å¯ä»¥ä¸€èµ·å·¥ä½œ |
| **ä»£ç†æ¨¡å¼** | è®¿é—®æ§åˆ¶ | æ§åˆ¶å¯¹å¯¹è±¡çš„è®¿é—® |
| **ç»„åˆæ¨¡å¼** | æ ‘å½¢ç»“æ„ | ç»Ÿä¸€å¤„ç†å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡ |

---

### ğŸ¤” é€‰æ‹©å»ºè®®ï¼šä»€ä¹ˆæ—¶å€™ç”¨è£…é¥°å™¨æ¨¡å¼ï¼Ÿ

é—®è‡ªå·±è¿™å‡ ä¸ªé—®é¢˜ï¼š

```
1. ä½ æ˜¯å¦éœ€è¦ç»™ç°æœ‰åŠŸèƒ½"åŠ æ–™"ï¼Œä½†ä¸ä¿®æ”¹åŸä»£ç ï¼Ÿ
   â†’ æ˜¯çš„è¯ï¼Œè€ƒè™‘è£…é¥°å™¨æ¨¡å¼

2. ä½ æ˜¯å¦éœ€è¦å¤šä¸ªåŠŸèƒ½å¯ä»¥çµæ´»ç»„åˆï¼Ÿ
   â†’ æ˜¯çš„è¯ï¼Œè€ƒè™‘è£…é¥°å™¨æ¨¡å¼

3. ä½ çš„æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆæƒé™ã€æ—¥å¿—ã€é”™è¯¯å¤„ç†ï¼‰æ˜¯å¦åœ¨å¤šä¸ªåœ°æ–¹é‡å¤ï¼Ÿ
   â†’ æ˜¯çš„è¯ï¼Œè€ƒè™‘è£…é¥°å™¨æ¨¡å¼

4. ä½ æ˜¯å¦éœ€è¦åœ¨è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ /ç§»é™¤åŠŸèƒ½ï¼Ÿ
   â†’ æ˜¯çš„è¯ï¼Œè€ƒè™‘è£…é¥°å™¨æ¨¡å¼

5. ä½ çš„åŠŸèƒ½æ˜¯å¦ç‹¬ç«‹ï¼Œå¯ä»¥å•ç‹¬æµ‹è¯•ï¼Ÿ
   â†’ å¦‚æœæ˜¯ï¼Œé€‚åˆç”¨è£…é¥°å™¨æ¨¡å¼
```

---

### ğŸ“ æ–‡ä»¶ç»“æ„å‚è€ƒ

```
src/
â”œâ”€â”€ decorators/
â”‚   â”œâ”€â”€ withPermission.tsx          # æƒé™è£…é¥°å™¨
â”‚   â”œâ”€â”€ withLoading.tsx             # Loading è£…é¥°å™¨
â”‚   â”œâ”€â”€ withErrorBoundary.tsx       # é”™è¯¯å¤„ç†è£…é¥°å™¨
â”‚   â”œâ”€â”€ withPerformance.tsx         # æ€§èƒ½ç›‘æ§è£…é¥°å™¨
â”‚   â”œâ”€â”€ functionDecorators.ts      # å‡½æ•°è£…é¥°å™¨ï¼ˆæ—¥å¿—ã€ç¼“å­˜ã€é‡è¯•ï¼‰
â”‚   â”œâ”€â”€ formDecorators.ts          # è¡¨å•éªŒè¯è£…é¥°å™¨
â”‚   â””â”€â”€ composeDecorators.tsx      # ç»„åˆè£…é¥°å™¨
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ UserList.tsx               # ä½¿ç”¨è£…é¥°å™¨çš„ç»„ä»¶
â”‚   â””â”€â”€ UserForm.tsx               # ä½¿ç”¨è¡¨å•è£…é¥°å™¨çš„ç»„ä»¶
â””â”€â”€ services/
    â””â”€â”€ userService.ts             # ä½¿ç”¨å‡½æ•°è£…é¥°å™¨çš„æœåŠ¡
```

---

> **ä¸‹ä¸€ç« é¢„å‘Šï¼šã€Šå¤–è§‚æ¨¡å¼ã€‹â€”â€” ç®€åŒ–å¤æ‚ç³»ç»Ÿçš„ç»Ÿä¸€å…¥å£**
> 
> æˆ‘ä»¬å°†è®²è§£å¦‚ä½•é€šè¿‡å¤–è§‚æ¨¡å¼å°è£…å¤æ‚çš„å­ç³»ç»Ÿï¼Œæä¾›ç®€å•æ˜“ç”¨çš„æ¥å£ã€‚

---

*å¦‚æœ‰ç–‘é—®æˆ–å»ºè®®ï¼Œæ¬¢è¿äº¤æµï¼*

