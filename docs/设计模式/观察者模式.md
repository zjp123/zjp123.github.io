# è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰

> ã€Šå‰ç«¯è®¾è®¡æ¨¡å¼å®æˆ˜æ‰‹å†Œã€‹ç³»åˆ— - ç¬¬ä¸‰ç« 

---

## ä¸€å¥è¯å¤§ç™½è¯

**å°±åƒè®¢é˜…å…¬ä¼—å·**ï¼šä½ å…³æ³¨äº†æŸä¸ªåšä¸»ï¼Œä»–ä¸€å‘æ–°æ–‡ç« ï¼Œæ‰€æœ‰ç²‰ä¸éƒ½èƒ½æ”¶åˆ°æ¨é€ã€‚åšä¸»ä¸éœ€è¦çŸ¥é“è°å…³æ³¨äº†ä»–ï¼Œåªç®¡å‘å¸ƒå†…å®¹ï¼›ç²‰ä¸ä¹Ÿä¸éœ€è¦ä¸€ç›´åˆ·æ–°ï¼Œç­‰é€šçŸ¥å°±è¡Œã€‚

## å‰ç«¯ç—›ç‚¹

æƒ³è±¡ä¸€ä¸‹ï¼Œä½ åœ¨åšä¸€ä¸ªæ•°æ®çœ‹æ¿ï¼Œå¤šä¸ªå›¾è¡¨ç»„ä»¶éƒ½ä¾èµ–åŒä¸€ä»½æ•°æ®ã€‚å½“æ•°æ®æ›´æ–°æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨é€šçŸ¥æ¯ä¸ªç»„ä»¶åˆ·æ–°ï¼š

```typescript
// âŒ æ²¡æœ‰ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼çš„ä»£ç ï¼šæ‰‹åŠ¨é€šçŸ¥æ¯ä¸ªç»„ä»¶
class Dashboard {
  private barChart: BarChart;
  private lineChart: LineChart;
  private pieChart: PieChart;
  private tableView: TableView;
  private statistics: Statistics;

  updateData(newData: any) {
    // æ•°æ®æ›´æ–°åï¼Œæ‰‹åŠ¨é€šçŸ¥æ¯ä¸ªç»„ä»¶
    this.barChart.update(newData);
    this.lineChart.update(newData);
    this.pieChart.update(newData);
    this.tableView.update(newData);
    this.statistics.update(newData);
    
    // æ–°å¢ä¸€ä¸ªç»„ä»¶ï¼Ÿè¦åœ¨è¿™é‡ŒåŠ ä¸€è¡Œé€šçŸ¥ï¼
    // this.newComponent.update(newData);
  }
}
```

**è¿™æ®µä»£ç çš„é—®é¢˜ï¼š**
1. ğŸ”— **ç´§è€¦åˆ**ï¼šDashboard å¿…é¡»çŸ¥é“æ‰€æœ‰ç»„ä»¶ï¼Œæ–°å¢ç»„ä»¶è¦æ”¹ Dashboard ä»£ç 
2. ğŸ“£ **é€šçŸ¥å›°éš¾**ï¼šè¦æ‰‹åŠ¨è°ƒç”¨æ¯ä¸ªç»„ä»¶çš„æ›´æ–°æ–¹æ³•ï¼Œå®¹æ˜“æ¼æ‰
3. ğŸš« **è¿åå¼€é—­åŸåˆ™**ï¼šæ¯æ¬¡æ–°å¢/åˆ é™¤ç»„ä»¶éƒ½è¦æ”¹æ ¸å¿ƒé€»è¾‘
4. ğŸ”„ **æ— æ³•åŠ¨æ€ç®¡ç†**ï¼šç»„ä»¶æ— æ³•åœ¨è¿è¡Œæ—¶åŠ¨æ€è®¢é˜…/å–æ¶ˆè®¢é˜…

## æ¨¡å¼æ ¸å¿ƒæ¦‚å¿µ

**è§‚å¯Ÿè€…æ¨¡å¼çš„æœ¬è´¨**ï¼šä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½ä¼šè‡ªåŠ¨æ”¶åˆ°é€šçŸ¥ã€‚

- **ä¸»é¢˜ï¼ˆSubjectï¼‰/å‘å¸ƒè€…ï¼ˆPublisherï¼‰**ï¼šç»´æŠ¤è§‚å¯Ÿè€…åˆ—è¡¨ï¼Œæä¾›è®¢é˜…/å–æ¶ˆè®¢é˜…æ¥å£
- **è§‚å¯Ÿè€…ï¼ˆObserverï¼‰/è®¢é˜…è€…ï¼ˆSubscriberï¼‰**ï¼šå®šä¹‰æ›´æ–°æ¥å£ï¼Œç­‰å¾…ä¸»é¢˜é€šçŸ¥
- **è§£è€¦**ï¼šå‘å¸ƒè€…å’Œè®¢é˜…è€…äº’ä¸ä¾èµ–ï¼Œé€šè¿‡æ¥å£é€šä¿¡

**ç±»æ¯”**ï¼š
- ğŸ“º **ä¼ ç»Ÿç”µè§†å°**ï¼ˆç´§è€¦åˆï¼‰ï¼šç”µè§†å°è¦è®°ä½æ¯ä¸ªè§‚ä¼—çš„åœ°å€ï¼Œæ‰‹åŠ¨é€èŠ‚ç›®å•
- ğŸ“¡ **ç°ä»£è®¢é˜…ç³»ç»Ÿ**ï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰ï¼šè§‚ä¼—è‡ªå·±è®¢é˜…é¢‘é“ï¼Œç”µè§†å°åªç®¡å¹¿æ’­ï¼Œè°è®¢é˜…è°æ”¶åˆ°

**è§‚å¯Ÿè€…æ¨¡å¼ vs å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼š**

```
è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰:
Subject â†â†’ Observer1
        â†â†’ Observer2
        â†â†’ Observer3
ï¼ˆç›´æ¥é€šä¿¡ï¼ŒSubject æŒæœ‰ Observer å¼•ç”¨ï¼‰

å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼ˆPub-Subï¼‰:
Publisher â†’ EventBus â†’ Subscriber1
                     â†’ Subscriber2
                     â†’ Subscriber3
ï¼ˆé€šè¿‡ä¸­é—´å±‚é€šä¿¡ï¼ŒPublisher ä¸çŸ¥é“ Subscriberï¼‰
```

| ç‰¹å¾ | è§‚å¯Ÿè€…æ¨¡å¼ | å‘å¸ƒ-è®¢é˜…æ¨¡å¼ |
|------|-----------|--------------|
| **è€¦åˆåº¦** | è¾ƒç´§ï¼ŒSubject çŸ¥é“ Observer | æ¾æ•£ï¼Œé€šè¿‡äº‹ä»¶æ€»çº¿é€šä¿¡ |
| **ä¸­é—´å±‚** | æ—  | æœ‰ï¼ˆEventBusï¼‰ |
| **çµæ´»æ€§** | è¾ƒä½ | è¾ƒé«˜ï¼Œæ”¯æŒäº‹ä»¶è¿‡æ»¤ |
| **å…¸å‹åº”ç”¨** | å†…éƒ¨ç»„ä»¶é€šä¿¡ | è·¨æ¨¡å—/è·¨ç³»ç»Ÿé€šä¿¡ |
| **å‰ç«¯ä¾‹å­** | Vue çš„å“åº”å¼ç³»ç»Ÿ | EventEmitterã€Redux |

## å‰ç«¯å®æˆ˜æ¡ˆä¾‹

### åœºæ™¯ä¸€ï¼šå®æ—¶æ•°æ®çœ‹æ¿ï¼ˆå¤šç»„ä»¶æ•°æ®åŒæ­¥ï¼‰

æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªæ•°æ®çœ‹æ¿ï¼ŒåŒ…å«å¤šä¸ªå›¾è¡¨å’Œç»Ÿè®¡å¡ç‰‡ï¼Œå½“æ•°æ®æºæ›´æ–°æ—¶ï¼Œæ‰€æœ‰ç»„ä»¶è‡ªåŠ¨åˆ·æ–°ï¼š

```typescript
// âœ… ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼é‡æ„

import React, { useState, useEffect } from 'react';
import { Card, Row, Col, Button, Space, Statistic, message } from 'antd';
import { Line, Column, Pie } from '@ant-design/plots';
import { ReloadOutlined, ArrowUpOutlined, ArrowDownOutlined } from '@ant-design/icons';

// 1ï¸âƒ£ å®šä¹‰è§‚å¯Ÿè€…æ¥å£
interface Observer {
  update: (data: any) => void;
}

// 2ï¸âƒ£ å®šä¹‰ä¸»é¢˜æ¥å£
interface Subject {
  attach: (observer: Observer) => void;
  detach: (observer: Observer) => void;
  notify: () => void;
}

// 3ï¸âƒ£ å®ç°ä¸»é¢˜ç±»ï¼šæ•°æ®æº
class DataSource implements Subject {
  private observers: Observer[] = [];
  private data: DashboardData;

  constructor(initialData: DashboardData) {
    this.data = initialData;
  }

  // è®¢é˜…
  attach(observer: Observer): void {
    const isExist = this.observers.includes(observer);
    if (isExist) {
      console.log('è§‚å¯Ÿè€…å·²å­˜åœ¨');
      return;
    }
    this.observers.push(observer);
    console.log('è§‚å¯Ÿè€…å·²è®¢é˜…ï¼Œå½“å‰è§‚å¯Ÿè€…æ•°é‡:', this.observers.length);
  }

  // å–æ¶ˆè®¢é˜…
  detach(observer: Observer): void {
    const observerIndex = this.observers.indexOf(observer);
    if (observerIndex === -1) {
      console.log('è§‚å¯Ÿè€…ä¸å­˜åœ¨');
      return;
    }
    this.observers.splice(observerIndex, 1);
    console.log('è§‚å¯Ÿè€…å·²å–æ¶ˆè®¢é˜…ï¼Œå½“å‰è§‚å¯Ÿè€…æ•°é‡:', this.observers.length);
  }

  // é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
  notify(): void {
    console.log('é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…...');
    this.observers.forEach((observer) => observer.update(this.data));
  }

  // æ›´æ–°æ•°æ®ï¼ˆè§¦å‘é€šçŸ¥ï¼‰
  setData(newData: DashboardData): void {
    this.data = newData;
    this.notify();
  }

  getData(): DashboardData {
    return this.data;
  }
}

// æ•°æ®ç±»å‹å®šä¹‰
interface DashboardData {
  sales: number;
  orders: number;
  users: number;
  revenue: number;
  trend: Array<{ date: string; value: number }>;
  category: Array<{ type: string; value: number }>;
}

// 4ï¸âƒ£ å®ç°è§‚å¯Ÿè€…ï¼šæŠ˜çº¿å›¾ç»„ä»¶
class LineChartObserver implements Observer {
  private updateCallback: (data: any) => void;

  constructor(updateCallback: (data: any) => void) {
    this.updateCallback = updateCallback;
  }

  update(data: DashboardData): void {
    console.log('ğŸ“ˆ æŠ˜çº¿å›¾æ”¶åˆ°æ›´æ–°é€šçŸ¥');
    this.updateCallback(data.trend);
  }
}

// 5ï¸âƒ£ å®ç°è§‚å¯Ÿè€…ï¼šæŸ±çŠ¶å›¾ç»„ä»¶
class BarChartObserver implements Observer {
  private updateCallback: (data: any) => void;

  constructor(updateCallback: (data: any) => void) {
    this.updateCallback = updateCallback;
  }

  update(data: DashboardData): void {
    console.log('ğŸ“Š æŸ±çŠ¶å›¾æ”¶åˆ°æ›´æ–°é€šçŸ¥');
    this.updateCallback(data.category);
  }
}

// 6ï¸âƒ£ å®ç°è§‚å¯Ÿè€…ï¼šé¥¼å›¾ç»„ä»¶
class PieChartObserver implements Observer {
  private updateCallback: (data: any) => void;

  constructor(updateCallback: (data: any) => void) {
    this.updateCallback = updateCallback;
  }

  update(data: DashboardData): void {
    console.log('ğŸ¥§ é¥¼å›¾æ”¶åˆ°æ›´æ–°é€šçŸ¥');
    this.updateCallback(data.category);
  }
}

// 7ï¸âƒ£ å®ç°è§‚å¯Ÿè€…ï¼šç»Ÿè®¡å¡ç‰‡ç»„ä»¶
class StatisticsObserver implements Observer {
  private updateCallback: (data: any) => void;

  constructor(updateCallback: (data: any) => void) {
    this.updateCallback = updateCallback;
  }

  update(data: DashboardData): void {
    console.log('ğŸ“‹ ç»Ÿè®¡å¡ç‰‡æ”¶åˆ°æ›´æ–°é€šçŸ¥');
    this.updateCallback({
      sales: data.sales,
      orders: data.orders,
      users: data.users,
      revenue: data.revenue,
    });
  }
}

// 8ï¸âƒ£ æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆ
const generateMockData = (): DashboardData => {
  const baseValue = Math.floor(Math.random() * 1000) + 5000;
  return {
    sales: baseValue,
    orders: Math.floor(Math.random() * 500) + 200,
    users: Math.floor(Math.random() * 10000) + 5000,
    revenue: baseValue * 1.5,
    trend: Array.from({ length: 7 }, (_, i) => ({
      date: `2024-01-${String(i + 1).padStart(2, '0')}`,
      value: Math.floor(Math.random() * 1000) + 4000,
    })),
    category: [
      { type: 'ç”µå­äº§å“', value: Math.floor(Math.random() * 300) + 100 },
      { type: 'æœè£…é‹åŒ…', value: Math.floor(Math.random() * 300) + 100 },
      { type: 'é£Ÿå“ç”Ÿé²œ', value: Math.floor(Math.random() * 300) + 100 },
      { type: 'å®¶å±…ç”¨å“', value: Math.floor(Math.random() * 300) + 100 },
      { type: 'å…¶ä»–', value: Math.floor(Math.random() * 200) + 50 },
    ],
  };
};

// 9ï¸âƒ£ React ç»„ä»¶ï¼šå®æ—¶æ•°æ®çœ‹æ¿
const RealtimeDashboard: React.FC = () => {
  const [dataSource] = useState(() => new DataSource(generateMockData()));
  
  // å„ç»„ä»¶çš„æœ¬åœ°çŠ¶æ€
  const [trendData, setTrendData] = useState(dataSource.getData().trend);
  const [categoryData, setCategoryData] = useState(dataSource.getData().category);
  const [statistics, setStatistics] = useState({
    sales: dataSource.getData().sales,
    orders: dataSource.getData().orders,
    users: dataSource.getData().users,
    revenue: dataSource.getData().revenue,
  });

  // ç»„ä»¶æŒ‚è½½æ—¶è®¢é˜…
  useEffect(() => {
    // åˆ›å»ºè§‚å¯Ÿè€…
    const lineChartObserver = new LineChartObserver(setTrendData);
    const barChartObserver = new BarChartObserver(setCategoryData);
    const pieChartObserver = new PieChartObserver(setCategoryData);
    const statisticsObserver = new StatisticsObserver(setStatistics);

    // è®¢é˜…æ•°æ®æº
    dataSource.attach(lineChartObserver);
    dataSource.attach(barChartObserver);
    dataSource.attach(statisticsObserver);

    // ç»„ä»¶å¸è½½æ—¶å–æ¶ˆè®¢é˜…
    return () => {
      dataSource.detach(lineChartObserver);
      dataSource.detach(barChartObserver);
      dataSource.detach(statisticsObserver);
    };
  }, [dataSource]);

  // æ‰‹åŠ¨åˆ·æ–°æ•°æ®
  const handleRefresh = () => {
    const newData = generateMockData();
    dataSource.setData(newData);
    message.success('æ•°æ®å·²åˆ·æ–°ï¼Œæ‰€æœ‰ç»„ä»¶è‡ªåŠ¨æ›´æ–°ï¼');
  };

  // è‡ªåŠ¨åˆ·æ–°
  const startAutoRefresh = () => {
    message.info('å¼€å¯è‡ªåŠ¨åˆ·æ–°ï¼ˆæ¯3ç§’ï¼‰');
    const timer = setInterval(() => {
      const newData = generateMockData();
      dataSource.setData(newData);
    }, 3000);

    setTimeout(() => {
      clearInterval(timer);
      message.info('è‡ªåŠ¨åˆ·æ–°å·²åœæ­¢');
    }, 15000); // 15ç§’ååœæ­¢
  };

  return (
    <div style={{ padding: 24, backgroundColor: '#f0f2f5', minHeight: '100vh' }}>
      {/* é¡¶éƒ¨æ“ä½œæ  */}
      <Card style={{ marginBottom: 16 }}>
        <Space>
          <Button 
            type="primary" 
            icon={<ReloadOutlined />} 
            onClick={handleRefresh}
          >
            åˆ·æ–°æ•°æ®
          </Button>
          <Button onClick={startAutoRefresh}>
            å¼€å¯è‡ªåŠ¨åˆ·æ–°ï¼ˆ15ç§’æ¼”ç¤ºï¼‰
          </Button>
          <span style={{ color: '#666', marginLeft: 16 }}>
            ğŸ’¡ ç‚¹å‡»åˆ·æ–°åï¼Œæ‰€æœ‰å›¾è¡¨å’Œç»Ÿè®¡å¡ç‰‡ä¼šè‡ªåŠ¨åŒæ­¥æ›´æ–°
          </span>
        </Space>
      </Card>

      {/* ç»Ÿè®¡å¡ç‰‡ */}
      <Row gutter={16} style={{ marginBottom: 16 }}>
        <Col span={6}>
          <Card>
            <Statistic
              title="ä»Šæ—¥é”€å”®é¢"
              value={statistics.sales}
              precision={2}
              prefix="Â¥"
              valueStyle={{ color: '#3f8600' }}
              suffix={<ArrowUpOutlined />}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic
              title="è®¢å•æ•°é‡"
              value={statistics.orders}
              suffix="å•"
              valueStyle={{ color: '#1890ff' }}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic
              title="æ´»è·ƒç”¨æˆ·"
              value={statistics.users}
              suffix="äºº"
              valueStyle={{ color: '#722ed1' }}
            />
          </Card>
        </Col>
        <Col span={6}>
          <Card>
            <Statistic
              title="æ€»æ”¶å…¥"
              value={statistics.revenue}
              precision={2}
              prefix="Â¥"
              valueStyle={{ color: '#cf1322' }}
              suffix={<ArrowDownOutlined />}
            />
          </Card>
        </Col>
      </Row>

      {/* å›¾è¡¨åŒºåŸŸ */}
      <Row gutter={16}>
        <Col span={12}>
          <Card title="ğŸ“ˆ é”€å”®è¶‹åŠ¿" style={{ marginBottom: 16 }}>
            <Line
              data={trendData}
              xField="date"
              yField="value"
              smooth
              height={300}
              color="#1890ff"
            />
          </Card>
        </Col>
        <Col span={12}>
          <Card title="ğŸ“Š å“ç±»é”€é‡" style={{ marginBottom: 16 }}>
            <Column
              data={categoryData}
              xField="type"
              yField="value"
              height={300}
              seriesField="type"
              legend={false}
            />
          </Card>
        </Col>
      </Row>

      <Card title="ğŸ“‹ è§‚å¯Ÿè€…æ¨¡å¼è¯´æ˜" type="inner">
        <ul>
          <li>âœ… <strong>DataSource</strong> æ˜¯ä¸»é¢˜ï¼ˆSubjectï¼‰ï¼Œç®¡ç†æ•°æ®å’Œè§‚å¯Ÿè€…åˆ—è¡¨</li>
          <li>âœ… <strong>å„å›¾è¡¨ç»„ä»¶</strong> æ˜¯è§‚å¯Ÿè€…ï¼ˆObserverï¼‰ï¼Œè®¢é˜…æ•°æ®å˜åŒ–</li>
          <li>âœ… æ•°æ®æ›´æ–°æ—¶ï¼ŒDataSource è‡ªåŠ¨é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…</li>
          <li>âœ… æ–°å¢ç»„ä»¶åªéœ€è®¢é˜… DataSourceï¼Œæ— éœ€ä¿®æ”¹åŸæœ‰ä»£ç </li>
          <li>âœ… ç»„ä»¶å¸è½½æ—¶è‡ªåŠ¨å–æ¶ˆè®¢é˜…ï¼Œé¿å…å†…å­˜æ³„æ¼</li>
        </ul>
      </Card>
    </div>
  );
};

export default RealtimeDashboard;
```

#### ğŸ¯ ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼åçš„å¥½å¤„

1. **è§£è€¦**ï¼šæ•°æ®æºä¸éœ€è¦çŸ¥é“æœ‰å“ªäº›ç»„ä»¶ï¼Œç»„ä»¶ä¹Ÿä¸éœ€è¦è½®è¯¢æ•°æ®
2. **çµæ´»è®¢é˜…**ï¼šç»„ä»¶å¯ä»¥åŠ¨æ€è®¢é˜…/å–æ¶ˆè®¢é˜…ï¼Œè¿è¡Œæ—¶å¯æ§
3. **è‡ªåŠ¨åŒæ­¥**ï¼šæ•°æ®ä¸€æ›´æ–°ï¼Œæ‰€æœ‰è®¢é˜…è€…è‡ªåŠ¨æ”¶åˆ°é€šçŸ¥
4. **æ˜“äºæ‰©å±•**ï¼šæ–°å¢ç»„ä»¶åªéœ€è®¢é˜…ï¼Œæ— éœ€æ”¹åŠ¨æ•°æ®æºä»£ç 

---

### åœºæ™¯äºŒï¼šå¤šå±‚çº§è¡¨å•è”åŠ¨ï¼ˆçœå¸‚åŒºä¸‰çº§è”åŠ¨ï¼‰

å½“é€‰æ‹©çœä»½æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°åŸå¸‚åˆ—è¡¨ï¼›é€‰æ‹©åŸå¸‚æ—¶ï¼Œè‡ªåŠ¨æ›´æ–°åŒºå¿åˆ—è¡¨ï¼š

```typescript
import React, { useState, useEffect } from 'react';
import { Form, Select, Card, Button, message } from 'antd';

// åœ°åŒºæ•°æ®ç±»å‹
interface Region {
  value: string;
  label: string;
  children?: Region[];
}

// è§‚å¯Ÿè€…æ¥å£
interface RegionObserver {
  update: (data: Region[]) => void;
}

// ä¸»é¢˜ç±»ï¼šåœ°åŒºé€‰æ‹©å™¨
class RegionSelector implements Subject {
  private observers: RegionObserver[] = [];
  private provinces: Region[] = [];
  private cities: Region[] = [];
  private districts: Region[] = [];

  constructor(data: Region[]) {
    this.provinces = data;
  }

  attach(observer: RegionObserver): void {
    this.observers.push(observer);
  }

  detach(observer: RegionObserver): void {
    const index = this.observers.indexOf(observer);
    if (index > -1) this.observers.splice(index, 1);
  }

  notify(): void {
    this.observers.forEach((observer) => observer.update(this.cities));
  }

  // é€‰æ‹©çœä»½ï¼Œæ›´æ–°åŸå¸‚åˆ—è¡¨
  selectProvince(provinceValue: string): void {
    const province = this.provinces.find((p) => p.value === provinceValue);
    this.cities = province?.children || [];
    this.districts = [];
    this.notify();
  }

  // é€‰æ‹©åŸå¸‚ï¼Œæ›´æ–°åŒºå¿åˆ—è¡¨
  selectCity(cityValue: string): void {
    const city = this.cities.find((c) => c.value === cityValue);
    this.districts = city?.children || [];
    // å¯ä»¥ç»§ç»­é€šçŸ¥åŒºå¿è§‚å¯Ÿè€…
  }

  getProvinces(): Region[] {
    return this.provinces;
  }

  getCities(): Region[] {
    return this.cities;
  }

  getDistricts(): Region[] {
    return this.districts;
  }
}

// åŸå¸‚è§‚å¯Ÿè€…
class CityObserver implements RegionObserver {
  private updateCallback: (data: Region[]) => void;

  constructor(updateCallback: (data: Region[]) => void) {
    this.updateCallback = updateCallback;
  }

  update(data: Region[]): void {
    console.log('ğŸ™ï¸ åŸå¸‚åˆ—è¡¨å·²æ›´æ–°');
    this.updateCallback(data);
  }
}

// React ç»„ä»¶
const AddressForm: React.FC = () => {
  const [form] = Form.useForm();

  // æ¨¡æ‹Ÿåœ°åŒºæ•°æ®
  const mockData: Region[] = [
    {
      value: 'guangdong',
      label: 'å¹¿ä¸œçœ',
      children: [
        {
          value: 'guangzhou',
          label: 'å¹¿å·å¸‚',
          children: [
            { value: 'tianhe', label: 'å¤©æ²³åŒº' },
            { value: 'yuexiu', label: 'è¶Šç§€åŒº' },
            { value: 'haizhu', label: 'æµ·ç åŒº' },
          ],
        },
        {
          value: 'shenzhen',
          label: 'æ·±åœ³å¸‚',
          children: [
            { value: 'futian', label: 'ç¦ç”°åŒº' },
            { value: 'nanshan', label: 'å—å±±åŒº' },
            { value: 'baoan', label: 'å®å®‰åŒº' },
          ],
        },
      ],
    },
    {
      value: 'zhejiang',
      label: 'æµ™æ±Ÿçœ',
      children: [
        {
          value: 'hangzhou',
          label: 'æ­å·å¸‚',
          children: [
            { value: 'xihu', label: 'è¥¿æ¹–åŒº' },
            { value: 'shangcheng', label: 'ä¸ŠåŸåŒº' },
          ],
        },
      ],
    },
  ];

  const [regionSelector] = useState(() => new RegionSelector(mockData));
  const [cities, setCities] = useState<Region[]>([]);
  const [districts, setDistricts] = useState<Region[]>([]);

  // è®¢é˜…åŸå¸‚æ›´æ–°
  useEffect(() => {
    const cityObserver = new CityObserver(setCities);
    regionSelector.attach(cityObserver);

    return () => {
      regionSelector.detach(cityObserver);
    };
  }, [regionSelector]);

  // é€‰æ‹©çœä»½
  const handleProvinceChange = (value: string) => {
    form.setFieldsValue({ city: undefined, district: undefined });
    regionSelector.selectProvince(value);
    setCities(regionSelector.getCities());
    setDistricts([]);
  };

  // é€‰æ‹©åŸå¸‚
  const handleCityChange = (value: string) => {
    form.setFieldsValue({ district: undefined });
    regionSelector.selectCity(value);
    setDistricts(regionSelector.getDistricts());
  };

  const onFinish = (values: any) => {
    message.success('æäº¤æˆåŠŸï¼');
    console.log('è¡¨å•æ•°æ®:', values);
  };

  return (
    <Card title="åœ°å€é€‰æ‹©ï¼ˆä¸‰çº§è”åŠ¨ï¼‰" style={{ maxWidth: 600, margin: '50px auto' }}>
      <Form form={form} layout="vertical" onFinish={onFinish}>
        <Form.Item label="çœä»½" name="province" rules={[{ required: true }]}>
          <Select
            placeholder="è¯·é€‰æ‹©çœä»½"
            onChange={handleProvinceChange}
            options={regionSelector.getProvinces()}
          />
        </Form.Item>

        <Form.Item label="åŸå¸‚" name="city" rules={[{ required: true }]}>
          <Select
            placeholder="è¯·å…ˆé€‰æ‹©çœä»½"
            disabled={cities.length === 0}
            onChange={handleCityChange}
            options={cities}
          />
        </Form.Item>

        <Form.Item label="åŒºå¿" name="district" rules={[{ required: true }]}>
          <Select
            placeholder="è¯·å…ˆé€‰æ‹©åŸå¸‚"
            disabled={districts.length === 0}
            options={districts}
          />
        </Form.Item>

        <Form.Item>
          <Button type="primary" htmlType="submit" block>
            æäº¤
          </Button>
        </Form.Item>
      </Form>
    </Card>
  );
};

export default AddressForm;
```

---

### åœºæ™¯ä¸‰ï¼šå…¨å±€æ¶ˆæ¯é€šçŸ¥ä¸­å¿ƒï¼ˆEventBus å®ç°ï¼‰

å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è·¨ç»„ä»¶é€šä¿¡ï¼Œè¿™æ—¶å¯ä»¥ç”¨å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼ˆè§‚å¯Ÿè€…æ¨¡å¼çš„å˜ä½“ï¼‰ï¼š

```typescript
import React, { useEffect, useState } from 'react';
import { Card, Button, Space, List, Badge, message as antdMessage } from 'antd';
import { BellOutlined, MessageOutlined, LikeOutlined } from '@ant-design/icons';

// äº‹ä»¶ç±»å‹
type EventType = 'notification' | 'message' | 'like';

interface Event {
  type: EventType;
  data: any;
}

// äº‹ä»¶æ€»çº¿ï¼ˆå‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼‰
class EventBus {
  private events: Map<EventType, Array<(data: any) => void>> = new Map();

  // è®¢é˜…äº‹ä»¶
  on(eventType: EventType, callback: (data: any) => void): () => void {
    if (!this.events.has(eventType)) {
      this.events.set(eventType, []);
    }
    this.events.get(eventType)!.push(callback);

    // è¿”å›å–æ¶ˆè®¢é˜…å‡½æ•°
    return () => {
      const callbacks = this.events.get(eventType);
      if (callbacks) {
        const index = callbacks.indexOf(callback);
        if (index > -1) callbacks.splice(index, 1);
      }
    };
  }

  // å‘å¸ƒäº‹ä»¶
  emit(eventType: EventType, data: any): void {
    const callbacks = this.events.get(eventType);
    if (callbacks) {
      callbacks.forEach((callback) => callback(data));
    }
  }

  // å–æ¶ˆæ‰€æœ‰è®¢é˜…
  off(eventType: EventType): void {
    this.events.delete(eventType);
  }
}

// å…¨å±€äº‹ä»¶æ€»çº¿å®ä¾‹
const globalEventBus = new EventBus();

// é€šçŸ¥ç»„ä»¶
const NotificationCenter: React.FC = () => {
  const [notifications, setNotifications] = useState<any[]>([]);

  useEffect(() => {
    const unsubscribe = globalEventBus.on('notification', (data) => {
      console.log('ğŸ“¢ æ”¶åˆ°é€šçŸ¥:', data);
      setNotifications((prev) => [data, ...prev].slice(0, 10)); // åªä¿ç•™æœ€æ–°10æ¡
    });

    return unsubscribe;
  }, []);

  return (
    <Card 
      title={
        <Space>
          <BellOutlined />
          ç³»ç»Ÿé€šçŸ¥
          {notifications.length > 0 && <Badge count={notifications.length} />}
        </Space>
      }
      style={{ height: 400, overflow: 'auto' }}
    >
      <List
        dataSource={notifications}
        renderItem={(item, index) => (
          <List.Item key={index}>
            <List.Item.Meta
              title={item.title}
              description={item.time}
            />
          </List.Item>
        )}
        locale={{ emptyText: 'æš‚æ— é€šçŸ¥' }}
      />
    </Card>
  );
};

// æ¶ˆæ¯ç»„ä»¶
const MessageCenter: React.FC = () => {
  const [messages, setMessages] = useState<any[]>([]);

  useEffect(() => {
    const unsubscribe = globalEventBus.on('message', (data) => {
      console.log('ğŸ’¬ æ”¶åˆ°æ¶ˆæ¯:', data);
      setMessages((prev) => [data, ...prev].slice(0, 10));
    });

    return unsubscribe;
  }, []);

  return (
    <Card
      title={
        <Space>
          <MessageOutlined />
          ç§ä¿¡æ¶ˆæ¯
          {messages.length > 0 && <Badge count={messages.length} />}
        </Space>
      }
      style={{ height: 400, overflow: 'auto' }}
    >
      <List
        dataSource={messages}
        renderItem={(item, index) => (
          <List.Item key={index}>
            <List.Item.Meta
              title={`æ¥è‡ª ${item.from}`}
              description={item.content}
            />
          </List.Item>
        )}
        locale={{ emptyText: 'æš‚æ— æ¶ˆæ¯' }}
      />
    </Card>
  );
};

// ç‚¹èµç»„ä»¶
const LikeCenter: React.FC = () => {
  const [likes, setLikes] = useState<any[]>([]);

  useEffect(() => {
    const unsubscribe = globalEventBus.on('like', (data) => {
      console.log('â¤ï¸ æ”¶åˆ°ç‚¹èµ:', data);
      setLikes((prev) => [data, ...prev].slice(0, 10));
    });

    return unsubscribe;
  }, []);

  return (
    <Card
      title={
        <Space>
          <LikeOutlined />
          ç‚¹èµé€šçŸ¥
          {likes.length > 0 && <Badge count={likes.length} />}
        </Space>
      }
      style={{ height: 400, overflow: 'auto' }}
    >
      <List
        dataSource={likes}
        renderItem={(item, index) => (
          <List.Item key={index}>
            <List.Item.Meta
              title={`${item.user} èµäº†ä½ çš„${item.type}`}
              description={item.time}
            />
          </List.Item>
        )}
        locale={{ emptyText: 'æš‚æ— ç‚¹èµ' }}
      />
    </Card>
  );
};

// å‘é€å™¨ç»„ä»¶ï¼ˆæ¨¡æ‹Ÿè§¦å‘å„ç§äº‹ä»¶ï¼‰
const EventEmitter: React.FC = () => {
  const sendNotification = () => {
    globalEventBus.emit('notification', {
      title: 'ç³»ç»Ÿæ›´æ–°æé†’',
      time: new Date().toLocaleString(),
    });
    antdMessage.success('å·²å‘é€é€šçŸ¥');
  };

  const sendMessage = () => {
    const users = ['å¼ ä¸‰', 'æå››', 'ç‹äº”', 'èµµå…­'];
    const randomUser = users[Math.floor(Math.random() * users.length)];
    globalEventBus.emit('message', {
      from: randomUser,
      content: 'ä½ å¥½ï¼Œè¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯',
      time: new Date().toLocaleString(),
    });
    antdMessage.success('å·²å‘é€æ¶ˆæ¯');
  };

  const sendLike = () => {
    const users = ['å°æ˜', 'å°çº¢', 'å°åˆš', 'å°ç¾'];
    const types = ['æ–‡ç« ', 'è¯„è®º', 'åŠ¨æ€', 'ç…§ç‰‡'];
    globalEventBus.emit('like', {
      user: users[Math.floor(Math.random() * users.length)],
      type: types[Math.floor(Math.random() * types.length)],
      time: new Date().toLocaleString(),
    });
    antdMessage.success('å·²å‘é€ç‚¹èµ');
  };

  return (
    <Card title="äº‹ä»¶å‘é€å™¨ï¼ˆæ¨¡æ‹Ÿè§¦å‘ï¼‰">
      <Space>
        <Button type="primary" onClick={sendNotification}>
          å‘é€é€šçŸ¥
        </Button>
        <Button type="primary" onClick={sendMessage}>
          å‘é€æ¶ˆæ¯
        </Button>
        <Button type="primary" onClick={sendLike}>
          å‘é€ç‚¹èµ
        </Button>
      </Space>
      <div style={{ marginTop: 16, color: '#666' }}>
        ğŸ’¡ ç‚¹å‡»æŒ‰é’®åï¼Œå¯¹åº”çš„é¢æ¿ä¼šè‡ªåŠ¨æ›´æ–°
      </div>
    </Card>
  );
};

// ä¸»åº”ç”¨
const EventBusDemo: React.FC = () => {
  return (
    <div style={{ padding: 24, backgroundColor: '#f0f2f5', minHeight: '100vh' }}>
      <EventEmitter />
      <div style={{ 
        display: 'grid', 
        gridTemplateColumns: 'repeat(3, 1fr)', 
        gap: 16, 
        marginTop: 16 
      }}>
        <NotificationCenter />
        <MessageCenter />
        <LikeCenter />
      </div>
    </div>
  );
};

export default EventBusDemo;
```

## æ¨¡å¼æ€»ç»“

### âœ… ä¼˜ç‚¹

1. **è§£è€¦åˆ**ï¼šä¸»é¢˜å’Œè§‚å¯Ÿè€…ä¹‹é—´æ˜¯æŠ½è±¡è€¦åˆï¼Œäº’ä¸ä¾èµ–å…·ä½“å®ç°
2. **åŠ¨æ€å…³è”**ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ /ç§»é™¤è§‚å¯Ÿè€…
3. **å¹¿æ’­é€šä¿¡**ï¼šä¸€æ¬¡é€šçŸ¥ï¼Œæ‰€æœ‰è§‚å¯Ÿè€…è‡ªåŠ¨æ›´æ–°
4. **ç¬¦åˆå¼€é—­åŸåˆ™**ï¼šæ–°å¢è§‚å¯Ÿè€…æ— éœ€ä¿®æ”¹ä¸»é¢˜ä»£ç 
5. **æ”¯æŒä¸€å¯¹å¤š**ï¼šä¸€ä¸ªä¸»é¢˜å¯ä»¥æœ‰å¤šä¸ªè§‚å¯Ÿè€…

### âŒ ç¼ºç‚¹

1. **é€šçŸ¥é¡ºåºä¸ç¡®å®š**ï¼šè§‚å¯Ÿè€…æ¥æ”¶é€šçŸ¥çš„é¡ºåºå¯èƒ½ä¸æ˜¯ä½ æœŸæœ›çš„
2. **å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼**ï¼šå¿˜è®°å–æ¶ˆè®¢é˜…ä¼šå¯¼è‡´å¯¹è±¡æ— æ³•è¢«åƒåœ¾å›æ”¶
3. **è°ƒè¯•å›°éš¾**ï¼šé€šçŸ¥é“¾è·¯é•¿äº†ï¼Œè°ƒè¯•æ—¶éš¾ä»¥è¿½è¸ª
4. **æ€§èƒ½é—®é¢˜**ï¼šè§‚å¯Ÿè€…è¿‡å¤šæ—¶ï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…ä¼šæœ‰æ€§èƒ½å¼€é”€

### ğŸ¯ é€‚ç”¨åœºæ™¯

è§‚å¯Ÿè€…æ¨¡å¼ç‰¹åˆ«é€‚åˆä»¥ä¸‹å‰ç«¯åœºæ™¯ï¼š

| åœºæ™¯ | è¯´æ˜ | å…¸å‹å®ç° |
|------|------|---------|
| **æ•°æ®åŒå‘ç»‘å®š** | æ•°æ®å˜åŒ–è‡ªåŠ¨æ›´æ–°è§†å›¾ | Vue çš„å“åº”å¼ç³»ç»Ÿã€React çš„çŠ¶æ€ç®¡ç† |
| **äº‹ä»¶ç›‘å¬** | DOM äº‹ä»¶ã€è‡ªå®šä¹‰äº‹ä»¶ | addEventListenerã€EventEmitter |
| **å¤šç»„ä»¶åŒæ­¥** | å¤šä¸ªç»„ä»¶ä¾èµ–åŒä¸€æ•°æ®æº | å®æ—¶çœ‹æ¿ã€ååŒç¼–è¾‘ |
| **æ¶ˆæ¯é€šçŸ¥** | å…¨å±€é€šçŸ¥ã€æ¶ˆæ¯æ¨é€ | æ¶ˆæ¯ä¸­å¿ƒã€WebSocket æ¨é€ |
| **è¡¨å•è”åŠ¨** | å­—æ®µä¹‹é—´ç›¸äº’å½±å“ | çœå¸‚åŒºè”åŠ¨ã€åŠ¨æ€è¡¨å• |
| **ä¸»é¢˜åˆ‡æ¢** | å…¨å±€æ ·å¼å˜åŒ– | æš—é»‘æ¨¡å¼åˆ‡æ¢ã€ä¸»é¢˜è‰²åˆ‡æ¢ |
| **æƒé™ç®¡ç†** | æƒé™å˜åŒ–æ—¶æ›´æ–° UI | ç™»å½•/ç™»å‡ºåæ›´æ–°èœå• |

### ğŸ¤” ä»€ä¹ˆæ—¶å€™è¯¥ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿ

**ä¸‰ä¸ªåˆ¤æ–­æ ‡å‡†ï¼š**

1. **å­˜åœ¨ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»å—ï¼Ÿ**
   - ä¸€ä¸ªå¯¹è±¡å˜åŒ–ï¼Œå¤šä¸ªå¯¹è±¡éœ€è¦åŒæ­¥æ›´æ–°

2. **å¯¹è±¡ä¹‹é—´éœ€è¦è§£è€¦å—ï¼Ÿ**
   - A ä¸åº”è¯¥ç›´æ¥ä¾èµ– Bã€Cã€Dï¼Œè€Œæ˜¯é€šè¿‡æ¥å£é€šä¿¡

3. **éœ€è¦åŠ¨æ€ç®¡ç†ä¾èµ–å—ï¼Ÿ**
   - è¿è¡Œæ—¶å¯èƒ½å¢åŠ /å‡å°‘ä¾èµ–å¯¹è±¡

**å¿«é€Ÿå†³ç­–æ ‘ï¼š**

```
ä¸€ä¸ªå¯¹è±¡å˜åŒ–æ—¶ï¼Œå…¶ä»–å¯¹è±¡éœ€è¦æ›´æ–°å—ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ è¿™äº›å¯¹è±¡çš„æ•°é‡æ˜¯åŠ¨æ€çš„å—ï¼Ÿ
    â”‚        â”œâ”€ æ˜¯ â†’ å®ƒä»¬ä¹‹é—´éœ€è¦è§£è€¦å—ï¼Ÿ
    â”‚        â”‚        â”œâ”€ æ˜¯ â†’ âœ… ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼
    â”‚        â”‚        â””â”€ å¦ â†’ ğŸ¤” çœ‹å¤æ‚åº¦ï¼Œç®€å•ç›´æ¥è°ƒç”¨ä¹Ÿè¡Œ
    â”‚        â””â”€ å¦ â†’ ğŸ¤” è€ƒè™‘ç›´æ¥å¼•ç”¨æˆ–è€…å›è°ƒå‡½æ•°
    â””â”€ å¦ â†’ âŒ ä¸éœ€è¦
```

### ğŸ’¡ å‰ç«¯æ¡†æ¶ä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼

#### Vue çš„å“åº”å¼ç³»ç»Ÿ

```javascript
// Vue 2.x å“åº”å¼åŸç†ï¼ˆç®€åŒ–ç‰ˆï¼‰
class Dep {
  constructor() {
    this.subscribers = [];
  }

  depend() {
    if (Dep.target) {
      this.subscribers.push(Dep.target);
    }
  }

  notify() {
    this.subscribers.forEach(sub => sub.update());
  }
}

function defineReactive(obj, key, val) {
  const dep = new Dep();
  
  Object.defineProperty(obj, key, {
    get() {
      dep.depend(); // æ”¶é›†ä¾èµ–
      return val;
    },
    set(newVal) {
      val = newVal;
      dep.notify(); // é€šçŸ¥æ›´æ–°
    }
  });
}
```

#### React çš„çŠ¶æ€è®¢é˜…

```typescript
// Redux çš„ store.subscribe
const store = createStore(reducer);

// è®¢é˜…çŠ¶æ€å˜åŒ–
const unsubscribe = store.subscribe(() => {
  console.log('State changed:', store.getState());
});

// å–æ¶ˆè®¢é˜…
unsubscribe();
```

#### åŸç”Ÿ JavaScript çš„è§‚å¯Ÿè€…

```javascript
// MutationObserverï¼šç›‘å¬ DOM å˜åŒ–
const observer = new MutationObserver((mutations) => {
  mutations.forEach((mutation) => {
    console.log('DOM å˜åŒ–:', mutation);
  });
});

observer.observe(document.body, {
  childList: true,
  subtree: true,
});

// IntersectionObserverï¼šç›‘å¬å…ƒç´ å¯è§æ€§
const observer = new IntersectionObserver((entries) => {
  entries.forEach((entry) => {
    if (entry.isIntersecting) {
      console.log('å…ƒç´ è¿›å…¥è§†å£');
    }
  });
});

observer.observe(document.querySelector('.lazy-image'));
```

---

## ğŸ’¬ å°ç»“

è§‚å¯Ÿè€…æ¨¡å¼å°±åƒæ˜¯å»ºç«‹äº†ä¸€ä¸ª"æ¶ˆæ¯è®¢é˜…ç³»ç»Ÿ"ï¼Œå‘å¸ƒè€…åªç®¡å‘å¸ƒæ¶ˆæ¯ï¼Œè®¢é˜…è€…è‡ªå·±å†³å®šè¦ä¸è¦è®¢é˜…ï¼ŒåŒæ–¹é€šè¿‡"æ¥å£"äº¤æµï¼Œäº’ä¸å¹²æ‰°ã€‚

åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè§‚å¯Ÿè€…æ¨¡å¼èƒ½è®©ä½ çš„ä»£ç ï¼š
- ä»"æ‰‹åŠ¨é€šçŸ¥æ¯ä¸ªç»„ä»¶"å˜æˆ"è‡ªåŠ¨å¹¿æ’­é€šçŸ¥"
- ä»"ç´§è€¦åˆ"å˜æˆ"æ¾è€¦åˆ"
- ä»"æ”¹ä¸€å¤„å½±å“å…¨å±€"å˜æˆ"ç‹¬ç«‹è®¢é˜…/å–æ¶ˆè®¢é˜…"

**è®°ä½ä¸€å¥è¯**ï¼šå½“ä½ å‘ç°è‡ªå·±åœ¨æ‰‹åŠ¨è°ƒç”¨å¤šä¸ªå¯¹è±¡çš„æ›´æ–°æ–¹æ³•æ—¶ï¼Œå°±è¯¥è€ƒè™‘è§‚å¯Ÿè€…æ¨¡å¼äº†ï¼

---

> ğŸ’¡ **æ€è€ƒé¢˜**ï¼š
> 1. åœ¨ä½ çš„é¡¹ç›®ä¸­ï¼Œæœ‰æ²¡æœ‰ä¸€ä¸ªæ•°æ®å˜åŒ–åéœ€è¦æ›´æ–°å¤šä¸ªç»„ä»¶çš„åœºæ™¯ï¼Ÿ
> 2. Vue çš„å“åº”å¼ç³»ç»Ÿå’Œ Redux çš„çŠ¶æ€ç®¡ç†ï¼Œå“ªä¸ªæ›´æ¥è¿‘è§‚å¯Ÿè€…æ¨¡å¼ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
> 3. å¦‚ä½•é¿å…è§‚å¯Ÿè€…æ¨¡å¼ä¸­çš„å†…å­˜æ³„æ¼ï¼Ÿï¼ˆæç¤ºï¼šuseEffect çš„æ¸…ç†å‡½æ•°ï¼‰

---

> ğŸ“š **ç›¸å…³æ¨¡å¼**ï¼š
> - å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼ˆPub-Subï¼‰ï¼šè§‚å¯Ÿè€…æ¨¡å¼çš„å˜ä½“ï¼Œå¢åŠ äº†äº‹ä»¶ä¸­å¿ƒ
> - ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediatorï¼‰ï¼šé€šè¿‡ä¸­ä»‹è€…åè°ƒå¤šä¸ªå¯¹è±¡ï¼Œé¿å…ç›´æ¥ä¾èµ–
> - å‘½ä»¤æ¨¡å¼ï¼ˆCommandï¼‰ï¼šå°†è¯·æ±‚å°è£…æˆå¯¹è±¡ï¼Œå¯ä»¥é…åˆè§‚å¯Ÿè€…æ¨¡å¼ä½¿ç”¨

